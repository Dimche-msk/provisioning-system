import{s as At,l as ct,m as Pt,o as Bt,u as Ut,p as Qt,q as Wt,d as c,i as v,F as Re,k as yn,a0 as Fn,H as zn,D as Ke,a as ae,E as He,b as m,C as M,c as O,e as F,f as K,g as V,h as S,t as H,j as N,O as Nt,n as Ot,r as Jn,a1 as ln,x as rt,Q as It,P as xe,K as jt,L as lt,M as _t,w as je}from"./CUkxpT2c.js";import{S as Kt,i as Ht,d as w,t as g,a as d,m as E,c as I,b as C,g as et,f as tt,e as ye}from"./DqPwdKnZ.js";import{I as Gt,t as Et,e as Ge}from"./BtYH2GXc.js";import{g as Rt,a as Xt,$ as Bn,B as ot,f as Qn}from"./wjMZg2eG.js";import{I as ze}from"./Clvdv4ji.js";import{L as Oe}from"./CE9t1zSW.js";import{C as Wn,a as Gn}from"./YhqYbtJb.js";import{C as Rn,a as Xn,b as Yn}from"./HaCMjAII.js";import{T as Zn,a as xn,b as el,c as Yt,d as Mt,e as Vt}from"./DQYf1rRt.js";import{S as tl,T as nl}from"./Cg1vJB5H.js";import{X as Un}from"./BqBe62oF.js";import{C as ll}from"./d27t083e.js";import{S as sl}from"./BGRfd66a.js";function ol(l){let e;const t=l[2].default,n=Bt(t,l,l[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8)&&Ut(n,t,o,o[3],e?Wt(t,o[3],s,null):Qt(o[3]),null)},i(o){e||(d(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function al(l){let e,t;const n=[{name:"pencil"},l[1],{iconNode:l[0]}];let o={$$slots:{default:[ol]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=ct(o,n[s]);return e=new Gt({props:o}),{c(){C(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,a){E(e,s,a),t=!0},p(s,[a]){const i=a&3?Rt(n,[n[0],a&2&&Xt(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function rl(l,e,t){let{$$slots:n={},$$scope:o}=e;const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];return l.$$set=a=>{t(1,e=ct(ct({},e),Pt(a))),"$$scope"in a&&t(3,o=a.$$scope)},e=Pt(e),[s,e,n,o]}class il extends Kt{constructor(e){super(),Ht(this,e,rl,al,At,{})}}function ul(l){let e;const t=l[2].default,n=Bt(t,l,l[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8)&&Ut(n,t,o,o[3],e?Wt(t,o[3],s,null):Qt(o[3]),null)},i(o){e||(d(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function fl(l){let e,t;const n=[{name:"plus"},l[1],{iconNode:l[0]}];let o={$$slots:{default:[ul]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=ct(o,n[s]);return e=new Gt({props:o}),{c(){C(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,a){E(e,s,a),t=!0},p(s,[a]){const i=a&3?Rt(n,[n[0],a&2&&Xt(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function _l(l,e,t){let{$$slots:n={},$$scope:o}=e;const s=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];return l.$$set=a=>{t(1,e=ct(ct({},e),Pt(a))),"$$scope"in a&&t(3,o=a.$$scope)},e=Pt(e),[s,e,n,o]}class cl extends Kt{constructor(e){super(),Ht(this,e,_l,fl,At,{})}}function pl(l){let e;const t=l[2].default,n=Bt(t,l,l[3],null);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&8)&&Ut(n,t,o,o[3],e?Wt(t,o[3],s,null):Qt(o[3]),null)},i(o){e||(d(n,o),e=!0)},o(o){g(n,o),e=!1},d(o){n&&n.d(o)}}}function ml(l){let e,t;const n=[{name:"target"},l[1],{iconNode:l[0]}];let o={$$slots:{default:[pl]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)o=ct(o,n[s]);return e=new Gt({props:o}),{c(){C(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,a){E(e,s,a),t=!0},p(s,[a]){const i=a&3?Rt(n,[n[0],a&2&&Xt(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:s}),e.$set(i)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function $l(l,e,t){let{$$slots:n={},$$scope:o}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"6"}],["circle",{cx:"12",cy:"12",r:"2"}]];return l.$$set=a=>{t(1,e=ct(ct({},e),Pt(a))),"$$scope"in a&&t(3,o=a.$$scope)},e=Pt(e),[s,e,n,o]}class dl extends Kt{constructor(e){super(),Ht(this,e,$l,ml,At,{})}}function sn(l,e,t){const n=l.slice();return n[71]=e[t],n}function on(l,e,t){const n=l.slice();return n[74]=e[t],n[75]=e,n[76]=t,n}function an(l,e,t){const n=l.slice();return n[71]=e[t],n}function rn(l,e,t){const n=l.slice();return n[79]=e[t],n}function un(l,e,t){const n=l.slice();return n[82]=e[t],n}function fn(l){let e,t,n,o,s,a=(l[21]("lines.title")||"Line Configuration")+"",i,_,r=l[21]("phone.number")+"",f,u,p=l[4].phone_number+"",k,P,j,te=(l[21]("lines.description")||"Manage additional lines for this phone.")+"",W,$e,U=l[0].length+"",R,Q,re=(l[2]||"∞")+"",X,G,de,A,D,L,Y,ee,ge,ne,ce,Je,se,ve,y,Z,oe,we,ue,Ee,Me,be,pe,Fe,Be,De,le;A=new ot({props:{variant:"ghost",size:"icon",$$slots:{default:[gl]},$$scope:{ctx:l}}}),A.$on("click",l[28]);let he=l[13]&&_n(l);ce=new tl({props:{class:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}});function Te(h){l[41](h)}let nt={placeholder:l[21]("common.search")||"Search...",class:"pl-8"};l[8]!==void 0&&(nt.value=l[8]),se=new ze({props:nt}),Ke.push(()=>ye(se,"value",Te)),Z=new ot({props:{disabled:!!l[10],$$slots:{default:[hl]},$$scope:{ctx:l}}}),Z.$on("click",l[24]);let me=l[10]&&mn(l);Ee=new Zn({props:{$$slots:{default:[_s]},$$scope:{ctx:l}}});let ie=l[20]>1&&In(l);return Fe=new ot({props:{variant:"outline",$$slots:{default:[ms]},$$scope:{ctx:l}}}),Fe.$on("click",l[28]),De=new ot({props:{$$slots:{default:[$s]},$$scope:{ctx:l}}}),De.$on("click",l[29]),{c(){e=S("div"),t=S("div"),n=S("div"),o=S("div"),s=S("h2"),i=H(a),_=H(". "),f=H(r),u=H(": "),k=H(p),P=N(),j=S("p"),W=H(te),$e=H(`
                        (`),R=H(U),Q=H(" / "),X=H(re),G=H(")"),de=N(),C(A.$$.fragment),D=N(),L=S("div"),he&&he.c(),Y=N(),ee=S("div"),ge=S("div"),ne=S("div"),C(ce.$$.fragment),Je=N(),C(se.$$.fragment),y=N(),C(Z.$$.fragment),oe=N(),me&&me.c(),we=N(),ue=S("div"),C(Ee.$$.fragment),Me=N(),ie&&ie.c(),be=N(),pe=S("div"),C(Fe.$$.fragment),Be=N(),C(De.$$.fragment),this.h()},l(h){e=O(h,"DIV",{class:!0});var q=F(e);t=O(q,"DIV",{class:!0});var fe=F(t);n=O(fe,"DIV",{class:!0});var Ce=F(n);o=O(Ce,"DIV",{});var Se=F(o);s=O(Se,"H2",{class:!0});var ke=F(s);i=K(ke,a),_=K(ke,". "),f=K(ke,r),u=K(ke,": "),k=K(ke,p),ke.forEach(c),P=V(Se),j=O(Se,"P",{class:!0});var _e=F(j);W=K(_e,te),$e=K(_e,`
                        (`),R=K(_e,U),Q=K(_e," / "),X=K(_e,re),G=K(_e,")"),_e.forEach(c),Se.forEach(c),de=V(Ce),I(A.$$.fragment,Ce),Ce.forEach(c),D=V(fe),L=O(fe,"DIV",{class:!0});var qe=F(L);he&&he.l(qe),Y=V(qe),ee=O(qe,"DIV",{class:!0});var Ie=F(ee);ge=O(Ie,"DIV",{class:!0});var Ue=F(ge);ne=O(Ue,"DIV",{class:!0});var Ze=F(ne);I(ce.$$.fragment,Ze),Je=V(Ze),I(se.$$.fragment,Ze),Ze.forEach(c),y=V(Ue),I(Z.$$.fragment,Ue),Ue.forEach(c),oe=V(Ie),me&&me.l(Ie),we=V(Ie),ue=O(Ie,"DIV",{class:!0});var T=F(ue);I(Ee.$$.fragment,T),T.forEach(c),Me=V(Ie),ie&&ie.l(Ie),Ie.forEach(c),qe.forEach(c),be=V(fe),pe=O(fe,"DIV",{class:!0});var B=F(pe);I(Fe.$$.fragment,B),Be=V(B),I(De.$$.fragment,B),B.forEach(c),fe.forEach(c),q.forEach(c),this.h()},h(){M(s,"class","text-lg font-semibold"),M(j,"class","text-sm text-muted-foreground"),M(n,"class","flex justify-between items-center mb-4 shrink-0"),M(ne,"class","relative flex-1"),M(ge,"class","flex justify-between items-center gap-4"),M(ue,"class","border rounded-md overflow-hidden"),M(ee,"class","flex-1 overflow-y-auto pr-2 space-y-4"),M(L,"class","flex gap-6 flex-1 min-h-0"),M(pe,"class","flex justify-end gap-2 mt-4 shrink-0"),M(t,"class","bg-background dark:bg-slate-900 p-6 rounded-lg shadow-lg max-w-7xl w-full max-h-[90vh] flex flex-col border dark:border-slate-700"),M(e,"class","fixed inset-0 z-50 flex items-center justify-center bg-black/50")},m(h,q){v(h,e,q),m(e,t),m(t,n),m(n,o),m(o,s),m(s,i),m(s,_),m(s,f),m(s,u),m(s,k),m(o,P),m(o,j),m(j,W),m(j,$e),m(j,R),m(j,Q),m(j,X),m(j,G),m(n,de),E(A,n,null),m(t,D),m(t,L),he&&he.m(L,null),m(L,Y),m(L,ee),m(ee,ge),m(ge,ne),E(ce,ne,null),m(ne,Je),E(se,ne,null),m(ge,y),E(Z,ge,null),m(ee,oe),me&&me.m(ee,null),m(ee,we),m(ee,ue),E(Ee,ue,null),m(ee,Me),ie&&ie.m(ee,null),m(t,be),m(t,pe),E(Fe,pe,null),m(pe,Be),E(De,pe,null),le=!0},p(h,q){(!le||q[0]&2097152)&&a!==(a=(h[21]("lines.title")||"Line Configuration")+"")&&ae(i,a),(!le||q[0]&2097152)&&r!==(r=h[21]("phone.number")+"")&&ae(f,r),(!le||q[0]&16)&&p!==(p=h[4].phone_number+"")&&ae(k,p),(!le||q[0]&2097152)&&te!==(te=(h[21]("lines.description")||"Manage additional lines for this phone.")+"")&&ae(W,te),(!le||q[0]&1)&&U!==(U=h[0].length+"")&&ae(R,U),(!le||q[0]&4)&&re!==(re=(h[2]||"∞")+"")&&ae(X,re);const fe={};q[2]&8388608&&(fe.$$scope={dirty:q,ctx:h}),A.$set(fe),h[13]?he?(he.p(h,q),q[0]&8192&&d(he,1)):(he=_n(h),he.c(),d(he,1),he.m(L,Y)):he&&(et(),g(he,1,1,()=>{he=null}),tt());const Ce={};q[0]&2097152&&(Ce.placeholder=h[21]("common.search")||"Search..."),!ve&&q[0]&256&&(ve=!0,Ce.value=h[8],He(()=>ve=!1)),se.$set(Ce);const Se={};q[0]&1024&&(Se.disabled=!!h[10]),q[0]&2097152|q[2]&8388608&&(Se.$$scope={dirty:q,ctx:h}),Z.$set(Se),h[10]?me?(me.p(h,q),q[0]&1024&&d(me,1)):(me=mn(h),me.c(),d(me,1),me.m(ee,we)):me&&(et(),g(me,1,1,()=>{me=null}),tt());const ke={};q[0]&2622624|q[2]&8388608&&(ke.$$scope={dirty:q,ctx:h}),Ee.$set(ke),h[20]>1?ie?(ie.p(h,q),q[0]&1048576&&d(ie,1)):(ie=In(h),ie.c(),d(ie,1),ie.m(ee,null)):ie&&(et(),g(ie,1,1,()=>{ie=null}),tt());const _e={};q[0]&2097152|q[2]&8388608&&(_e.$$scope={dirty:q,ctx:h}),Fe.$set(_e);const qe={};q[2]&8388608&&(qe.$$scope={dirty:q,ctx:h}),De.$set(qe)},i(h){le||(d(A.$$.fragment,h),d(he),d(ce.$$.fragment,h),d(se.$$.fragment,h),d(Z.$$.fragment,h),d(me),d(Ee.$$.fragment,h),d(ie),d(Fe.$$.fragment,h),d(De.$$.fragment,h),le=!0)},o(h){g(A.$$.fragment,h),g(he),g(ce.$$.fragment,h),g(se.$$.fragment,h),g(Z.$$.fragment,h),g(me),g(Ee.$$.fragment,h),g(ie),g(Fe.$$.fragment,h),g(De.$$.fragment,h),le=!1},d(h){h&&c(e),w(A),he&&he.d(),w(ce),w(se),w(Z),me&&me.d(),w(Ee),ie&&ie.d(),w(Fe),w(De)}}}function gl(l){let e,t;return e=new Un({props:{class:"h-4 w-4"}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p:Ot,i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function _n(l){let e,t,n,o,s,a,i,_,r,f=l[18]&&cn(l),u=l[16]&&pn();return{c(){e=S("div"),t=S("div"),n=S("img"),s=N(),f&&f.c(),a=N(),u&&u.c(),this.h()},l(p){e=O(p,"DIV",{class:!0});var k=F(e);t=O(k,"DIV",{class:!0});var P=F(t);n=O(P,"IMG",{src:!0,alt:!0,class:!0}),s=V(P),f&&f.l(P),P.forEach(c),a=V(k),u&&u.l(k),k.forEach(c),this.h()},h(){ln(n.src,o=l[13])||M(n,"src",o),M(n,"alt","Phone"),M(n,"class","max-w-full max-h-full object-contain"),(l[11]===void 0||l[12]===void 0)&&It(()=>l[39].call(n)),M(t,"class","relative inline-block"),M(e,"class","w-1/3 bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 border dark:border-slate-700 relative overflow-hidden")},m(p,k){v(p,e,k),m(e,t),m(t,n),m(t,s),f&&f.m(t,null),m(e,a),u&&u.m(e,null),i=!0,_||(r=[rt(n,"load",l[39]),rt(n,"error",l[40])],_=!0)},p(p,k){(!i||k[0]&8192&&!ln(n.src,o=p[13]))&&M(n,"src",o),p[18]?f?(f.p(p,k),k[0]&262144&&d(f,1)):(f=cn(p),f.c(),d(f,1),f.m(t,null)):f&&(et(),g(f,1,1,()=>{f=null}),tt()),p[16]?u||(u=pn(),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(p){i||(d(f),i=!0)},o(p){g(f),i=!1},d(p){p&&c(e),f&&f.d(),u&&u.d(),_=!1,Jn(r)}}}function cn(l){let e,t,n,o,s,a;return s=new dl({props:{class:"h-8 w-8 text-red-600 drop-shadow-[0_0_5px_rgba(255,255,255,0.8)]"}}),{c(){e=S("div"),t=S("div"),n=S("div"),o=N(),C(s.$$.fragment),this.h()},l(i){e=O(i,"DIV",{class:!0,style:!0});var _=F(e);t=O(_,"DIV",{class:!0});var r=F(t);n=O(r,"DIV",{class:!0}),F(n).forEach(c),o=V(r),I(s.$$.fragment,r),r.forEach(c),_.forEach(c),this.h()},h(){M(n,"class","absolute inset-0 rounded-full border-4 border-red-500 animate-ping opacity-75"),M(t,"class","relative"),M(e,"class","absolute pointer-events-none flex items-center justify-center"),jt(e,"left",l[18].left+"%"),jt(e,"top",l[18].top+"%"),jt(e,"transform","translate(-50%, -50%)")},m(i,_){v(i,e,_),m(e,t),m(t,n),m(t,o),E(s,t,null),a=!0},p(i,_){(!a||_[0]&262144)&&jt(e,"left",i[18].left+"%"),(!a||_[0]&262144)&&jt(e,"top",i[18].top+"%")},i(i){a||(d(s.$$.fragment,i),a=!0)},o(i){g(s.$$.fragment,i),a=!1},d(i){i&&c(e),w(s)}}}function pn(l){let e,t='<span class="text-sm text-muted-foreground">Image not found</span>';return{c(){e=S("div"),e.innerHTML=t,this.h()},l(n){e=O(n,"DIV",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-1ryl1u5"&&(e.innerHTML=t),this.h()},h(){M(e,"class","absolute inset-0 flex items-center justify-center bg-muted/50")},m(n,o){v(n,e,o)},d(n){n&&c(e)}}}function hl(l){let e,t,n=(l[21]("common.add")||"Add Line")+"",o,s;return e=new cl({props:{class:"mr-2 h-4 w-4"}}),{c(){C(e.$$.fragment),t=N(),o=H(n)},l(a){I(e.$$.fragment,a),t=V(a),o=K(a,n)},m(a,i){E(e,a,i),v(a,t,i),v(a,o,i),s=!0},p(a,i){(!s||i[0]&2097152)&&n!==(n=(a[21]("common.add")||"Add Line")+"")&&ae(o,n)},i(a){s||(d(e.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(o)),w(e,a)}}}function mn(l){let e,t,n=(l[15]?l[21]("lines.edit_item")||"Edit Item":l[21]("lines.new_item")||"New Item")+"",o,s,a,i,_,r,f,u,p,k,P,j,te,W,$e,U,R,Q,re,X,G,de,A,D,L,Y,ee,ge,ne,ce,Je,se,ve,y,Z,oe,we,ue;_=new Oe({props:{$$slots:{default:[vl]},$$scope:{ctx:l}}});function Ee(h,q){var fe;return(fe=h[5])!=null&&fe.key_types&&h[5].key_types.length>0?kl:bl}let Me=Ee(l),be=Me(l);k=new Oe({props:{$$slots:{default:[wl]},$$scope:{ctx:l}}});function pe(h){l[43](h)}let Fe={type:"number"};l[10].account_number!==void 0&&(Fe.value=l[10].account_number),j=new ze({props:Fe}),Ke.push(()=>ye(j,"value",pe)),U=new Oe({props:{$$slots:{default:[El]},$$scope:{ctx:l}}});function Be(h){l[44](h)}let De={type:"number",min:"1"};l[10].key_number!==void 0&&(De.value=l[10].key_number),Q=new ze({props:De}),Ke.push(()=>ye(Q,"value",Be));let le=l[4].expansion_modules_count>0&&gn(l);const he=[Dl,Cl],Te=[];function nt(h,q){return h[10].type==="Line"?0:1}A=nt(l),D=Te[A]=he[A](l),ee=new Oe({props:{$$slots:{default:[Bl]},$$scope:{ctx:l}}});function me(h){l[61](h)}let ie={};return l[14].description!==void 0&&(ie.value=l[14].description),ne=new ze({props:ie}),Ke.push(()=>ye(ne,"value",me)),ve=new ot({props:{variant:"outline",size:"sm",$$slots:{default:[Ul]},$$scope:{ctx:l}}}),ve.$on("click",l[27]),Z=new ot({props:{size:"sm",$$slots:{default:[Ql]},$$scope:{ctx:l}}}),Z.$on("click",l[25]),{c(){e=S("div"),t=S("h3"),o=H(n),s=N(),a=S("div"),i=S("div"),C(_.$$.fragment),r=N(),f=S("select"),be.c(),u=N(),p=S("div"),C(k.$$.fragment),P=N(),C(j.$$.fragment),W=N(),$e=S("div"),C(U.$$.fragment),R=N(),C(Q.$$.fragment),X=N(),le&&le.c(),de=N(),D.c(),L=N(),Y=S("div"),C(ee.$$.fragment),ge=N(),C(ne.$$.fragment),Je=N(),se=S("div"),C(ve.$$.fragment),y=N(),C(Z.$$.fragment),this.h()},l(h){e=O(h,"DIV",{class:!0});var q=F(e);t=O(q,"H3",{class:!0});var fe=F(t);o=K(fe,n),fe.forEach(c),s=V(q),a=O(q,"DIV",{class:!0});var Ce=F(a);i=O(Ce,"DIV",{class:!0});var Se=F(i);I(_.$$.fragment,Se),r=V(Se),f=O(Se,"SELECT",{class:!0});var ke=F(f);be.l(ke),ke.forEach(c),Se.forEach(c),u=V(Ce),p=O(Ce,"DIV",{class:!0});var _e=F(p);I(k.$$.fragment,_e),P=V(_e),I(j.$$.fragment,_e),_e.forEach(c),W=V(Ce),$e=O(Ce,"DIV",{class:!0});var qe=F($e);I(U.$$.fragment,qe),R=V(qe),I(Q.$$.fragment,qe),qe.forEach(c),X=V(Ce),le&&le.l(Ce),Ce.forEach(c),de=V(q),D.l(q),L=V(q),Y=O(q,"DIV",{class:!0});var Ie=F(Y);I(ee.$$.fragment,Ie),ge=V(Ie),I(ne.$$.fragment,Ie),Ie.forEach(c),Je=V(q),se=O(q,"DIV",{class:!0});var Ue=F(se);I(ve.$$.fragment,Ue),y=V(Ue),I(Z.$$.fragment,Ue),Ue.forEach(c),q.forEach(c),this.h()},h(){M(t,"class","font-semibold text-lg border-b pb-2 mb-4"),M(f,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"),l[10].type===void 0&&It(()=>l[42].call(f)),M(i,"class","space-y-2"),M(p,"class","space-y-2"),M($e,"class","space-y-2"),M(a,"class",G="grid "+(l[4].expansion_modules_count>0?"grid-cols-4":"grid-cols-3")+" gap-4"),M(Y,"class","space-y-2"),M(se,"class","flex justify-end gap-2"),M(e,"class","border-2 rounded-lg p-6 bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700 shadow-md space-y-4")},m(h,q){v(h,e,q),m(e,t),m(t,o),m(e,s),m(e,a),m(a,i),E(_,i,null),m(i,r),m(i,f),be.m(f,null),xe(f,l[10].type,!0),m(a,u),m(a,p),E(k,p,null),m(p,P),E(j,p,null),m(a,W),m(a,$e),E(U,$e,null),m($e,R),E(Q,$e,null),m(a,X),le&&le.m(a,null),m(e,de),Te[A].m(e,null),m(e,L),m(e,Y),E(ee,Y,null),m(Y,ge),E(ne,Y,null),m(e,Je),m(e,se),E(ve,se,null),m(se,y),E(Z,se,null),oe=!0,we||(ue=rt(f,"change",l[42]),we=!0)},p(h,q){(!oe||q[0]&2129920)&&n!==(n=(h[15]?h[21]("lines.edit_item")||"Edit Item":h[21]("lines.new_item")||"New Item")+"")&&ae(o,n);const fe={};q[2]&8388608&&(fe.$$scope={dirty:q,ctx:h}),_.$set(fe),Me===(Me=Ee(h))&&be?be.p(h,q):(be.d(1),be=Me(h),be&&(be.c(),be.m(f,null))),q[0]&1056&&xe(f,h[10].type);const Ce={};q[2]&8388608&&(Ce.$$scope={dirty:q,ctx:h}),k.$set(Ce);const Se={};!te&&q[0]&1024&&(te=!0,Se.value=h[10].account_number,He(()=>te=!1)),j.$set(Se);const ke={};q[2]&8388608&&(ke.$$scope={dirty:q,ctx:h}),U.$set(ke);const _e={};!re&&q[0]&1024&&(re=!0,_e.value=h[10].key_number,He(()=>re=!1)),Q.$set(_e),h[4].expansion_modules_count>0?le?(le.p(h,q),q[0]&16&&d(le,1)):(le=gn(h),le.c(),d(le,1),le.m(a,null)):le&&(et(),g(le,1,1,()=>{le=null}),tt()),(!oe||q[0]&16&&G!==(G="grid "+(h[4].expansion_modules_count>0?"grid-cols-4":"grid-cols-3")+" gap-4"))&&M(a,"class",G);let qe=A;A=nt(h),A===qe?Te[A].p(h,q):(et(),g(Te[qe],1,1,()=>{Te[qe]=null}),tt(),D=Te[A],D?D.p(h,q):(D=Te[A]=he[A](h),D.c()),d(D,1),D.m(e,L));const Ie={};q[2]&8388608&&(Ie.$$scope={dirty:q,ctx:h}),ee.$set(Ie);const Ue={};!ce&&q[0]&16384&&(ce=!0,Ue.value=h[14].description,He(()=>ce=!1)),ne.$set(Ue);const Ze={};q[0]&2097152|q[2]&8388608&&(Ze.$$scope={dirty:q,ctx:h}),ve.$set(Ze);const T={};q[2]&8388608&&(T.$$scope={dirty:q,ctx:h}),Z.$set(T)},i(h){oe||(d(_.$$.fragment,h),d(k.$$.fragment,h),d(j.$$.fragment,h),d(U.$$.fragment,h),d(Q.$$.fragment,h),d(le),d(D),d(ee.$$.fragment,h),d(ne.$$.fragment,h),d(ve.$$.fragment,h),d(Z.$$.fragment,h),oe=!0)},o(h){g(_.$$.fragment,h),g(k.$$.fragment,h),g(j.$$.fragment,h),g(U.$$.fragment,h),g(Q.$$.fragment,h),g(le),g(D),g(ee.$$.fragment,h),g(ne.$$.fragment,h),g(ve.$$.fragment,h),g(Z.$$.fragment,h),oe=!1},d(h){h&&c(e),w(_),be.d(),w(k),w(j),w(U),w(Q),le&&le.d(),Te[A].d(),w(ee),w(ne),w(ve),w(Z),we=!1,ue()}}}function vl(l){let e;return{c(){e=H("Тип")},l(t){e=K(t,"Тип")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function bl(l){let e,t="Линия",n,o="Свободно",s,a="Верхняя клавиша",i,_="Программная клавиша",r,f="Нижняя клавиша",u,p=l[1]>0&&$n();return{c(){e=S("option"),e.textContent=t,n=S("option"),n.textContent=o,s=S("option"),s.textContent=a,i=S("option"),i.textContent=_,r=S("option"),r.textContent=f,p&&p.c(),u=Re(),this.h()},l(k){e=O(k,"OPTION",{"data-svelte-h":!0}),lt(e)!=="svelte-f3j3u1"&&(e.textContent=t),n=O(k,"OPTION",{"data-svelte-h":!0}),lt(n)!=="svelte-jppu2r"&&(n.textContent=o),s=O(k,"OPTION",{"data-svelte-h":!0}),lt(s)!=="svelte-fc8buy"&&(s.textContent=a),i=O(k,"OPTION",{"data-svelte-h":!0}),lt(i)!=="svelte-td3t14"&&(i.textContent=_),r=O(k,"OPTION",{"data-svelte-h":!0}),lt(r)!=="svelte-1m1smu1"&&(r.textContent=f),p&&p.l(k),u=Re(),this.h()},h(){e.__value="Line",je(e,e.__value),n.__value="Free",je(n,n.__value),s.__value="topsoftkey",je(s,s.__value),i.__value="softkey",je(i,i.__value),r.__value="bottomkey",je(r,r.__value)},m(k,P){v(k,e,P),v(k,n,P),v(k,s,P),v(k,i,P),v(k,r,P),p&&p.m(k,P),v(k,u,P)},p(k,P){k[1]>0?p||(p=$n(),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},d(k){k&&(c(e),c(n),c(s),c(i),c(r),c(u)),p&&p.d(k)}}}function kl(l){let e,t=Ge(l[5].key_types),n=[];for(let o=0;o<t.length;o+=1)n[o]=dn(un(l,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Re()},l(o){for(let s=0;s<n.length;s+=1)n[s].l(o);e=Re()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);v(o,e,s)},p(o,s){if(s[0]&32){t=Ge(o[5].key_types);let a;for(a=0;a<t.length;a+=1){const i=un(o,t,a);n[a]?n[a].p(i,s):(n[a]=dn(i),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(o){o&&c(e),_t(n,o)}}}function $n(l){let e,t="Клавиша корпуса";return{c(){e=S("option"),e.textContent=t,this.h()},l(n){e=O(n,"OPTION",{"data-svelte-h":!0}),lt(e)!=="svelte-jau8ff"&&(e.textContent=t),this.h()},h(){e.__value="hard_key",je(e,e.__value)},m(n,o){v(n,e,o)},d(n){n&&c(e)}}}function dn(l){let e,t=(l[82].verbose||l[82].id)+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[82].id,je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&32&&t!==(t=(s[82].verbose||s[82].id)+"")&&ae(n,t),a[0]&32&&o!==(o=s[82].id)&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function wl(l){let e;return{c(){e=H("Аккаунт #")},l(t){e=K(t,"Аккаунт #")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function El(l){let e;return{c(){e=H("Кнопка #")},l(t){e=K(t,"Кнопка #")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function gn(l){let e,t,n,o,s,a;t=new Oe({props:{$$slots:{default:[Il]},$$scope:{ctx:l}}});function i(r){l[45](r)}let _={type:"number",min:"0",max:l[4].expansion_modules_count||0};return l[10].panel_number!==void 0&&(_.value=l[10].panel_number),o=new ze({props:_}),Ke.push(()=>ye(o,"value",i)),{c(){e=S("div"),C(t.$$.fragment),n=N(),C(o.$$.fragment),this.h()},l(r){e=O(r,"DIV",{class:!0});var f=F(e);I(t.$$.fragment,f),n=V(f),I(o.$$.fragment,f),f.forEach(c),this.h()},h(){M(e,"class","space-y-2")},m(r,f){v(r,e,f),E(t,e,null),m(e,n),E(o,e,null),a=!0},p(r,f){const u={};f[2]&8388608&&(u.$$scope={dirty:f,ctx:r}),t.$set(u);const p={};f[0]&16&&(p.max=r[4].expansion_modules_count||0),!s&&f[0]&1024&&(s=!0,p.value=r[10].panel_number,He(()=>s=!1)),o.$set(p)},i(r){a||(d(t.$$.fragment,r),d(o.$$.fragment,r),a=!0)},o(r){g(t.$$.fragment,r),g(o.$$.fragment,r),a=!1},d(r){r&&c(e),w(t),w(o)}}}function Il(l){let e;return{c(){e=H("Панель #")},l(t){e=K(t,"Панель #")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Cl(l){let e,t,n,o,s,a,i="Другое",_,r,f,u,p,k;n=new Oe({props:{$$slots:{default:[Vl]},$$scope:{ctx:l}}});let P=Ge(l[17]),j=[];for(let U=0;U<P.length;U+=1)j[U]=hn(rn(l,P,U));const te=[Pl,Nl],W=[];function $e(U,R){return U[14].type&&U[14].type!=="custom"?0:U[14].type==="custom"?1:-1}return~(r=$e(l))&&(f=W[r]=te[r](l)),{c(){e=S("div"),t=S("div"),C(n.$$.fragment),o=N(),s=S("select");for(let U=0;U<j.length;U+=1)j[U].c();a=S("option"),a.textContent=i,_=N(),f&&f.c(),this.h()},l(U){e=O(U,"DIV",{class:!0});var R=F(e);t=O(R,"DIV",{class:!0});var Q=F(t);I(n.$$.fragment,Q),o=V(Q),s=O(Q,"SELECT",{class:!0});var re=F(s);for(let X=0;X<j.length;X+=1)j[X].l(re);a=O(re,"OPTION",{"data-svelte-h":!0}),lt(a)!=="svelte-1o3oyas"&&(a.textContent=i),re.forEach(c),Q.forEach(c),_=V(R),f&&f.l(R),R.forEach(c),this.h()},h(){a.__value="custom",je(a,a.__value),M(s,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"),l[14].type===void 0&&It(()=>l[54].call(s)),M(t,"class","space-y-2"),M(e,"class","col-span-3 space-y-4")},m(U,R){v(U,e,R),m(e,t),E(n,t,null),m(t,o),m(t,s);for(let Q=0;Q<j.length;Q+=1)j[Q]&&j[Q].m(s,null);m(s,a),xe(s,l[14].type,!0),m(e,_),~r&&W[r].m(e,null),u=!0,p||(k=rt(s,"change",l[54]),p=!0)},p(U,R){const Q={};if(R[2]&8388608&&(Q.$$scope={dirty:R,ctx:U}),n.$set(Q),R[0]&131072){P=Ge(U[17]);let X;for(X=0;X<P.length;X+=1){const G=rn(U,P,X);j[X]?j[X].p(G,R):(j[X]=hn(G),j[X].c(),j[X].m(s,a))}for(;X<j.length;X+=1)j[X].d(1);j.length=P.length}R[0]&147456&&xe(s,U[14].type);let re=r;r=$e(U),r===re?~r&&W[r].p(U,R):(f&&(et(),g(W[re],1,1,()=>{W[re]=null}),tt()),~r?(f=W[r],f?f.p(U,R):(f=W[r]=te[r](U),f.c()),d(f,1),f.m(e,null)):f=null)},i(U){u||(d(n.$$.fragment,U),d(f),u=!0)},o(U){g(n.$$.fragment,U),g(f),u=!1},d(U){U&&c(e),w(n),_t(j,U),~r&&W[r].d(),p=!1,k()}}}function Dl(l){let e,t,n,o,s,a,i,_,r,f,u,p,k,P,j,te,W,$e,U,R,Q,re,X,G,de,A,D,L,Y,ee,ge,ne,ce,Je,se,ve,y,Z,oe,we,ue,Ee,Me,be,pe,Fe,Be,De,le;n=new Oe({props:{$$slots:{default:[Ml]},$$scope:{ctx:l}}});function he(T){l[46](T)}let Te={};l[14].line_number!==void 0&&(Te.value=l[14].line_number),s=new ze({props:Te}),Ke.push(()=>ye(s,"value",he)),r=new Oe({props:{$$slots:{default:[Al]},$$scope:{ctx:l}}});function nt(T){l[47](T)}let me={};l[14].display_name!==void 0&&(me.value=l[14].display_name),u=new ze({props:me}),Ke.push(()=>ye(u,"value",nt)),j=new Oe({props:{$$slots:{default:[Kl]},$$scope:{ctx:l}}});function ie(T){l[48](T)}let h={};l[14].user_name!==void 0&&(h.value=l[14].user_name),W=new ze({props:h}),Ke.push(()=>ye(W,"value",ie)),Q=new Oe({props:{$$slots:{default:[Hl]},$$scope:{ctx:l}}});function q(T){l[49](T)}let fe={};l[14].auth_name!==void 0&&(fe.value=l[14].auth_name),X=new ze({props:fe}),Ke.push(()=>ye(X,"value",q)),D=new Oe({props:{$$slots:{default:[yl]},$$scope:{ctx:l}}});function Ce(T){l[50](T)}let Se={type:"password"};l[14].password!==void 0&&(Se.value=l[14].password),Y=new ze({props:Se}),Ke.push(()=>ye(Y,"value",Ce)),ce=new Oe({props:{$$slots:{default:[Fl]},$$scope:{ctx:l}}});function ke(T){l[51](T)}let _e={};l[14].screen_name!==void 0&&(_e.value=l[14].screen_name),se=new ze({props:_e}),Ke.push(()=>ye(se,"value",ke)),oe=new Oe({props:{$$slots:{default:[zl]},$$scope:{ctx:l}}});function qe(T){l[52](T)}let Ie={};l[14].registrar1_ip!==void 0&&(Ie.value=l[14].registrar1_ip),ue=new ze({props:Ie}),Ke.push(()=>ye(ue,"value",qe)),pe=new Oe({props:{$$slots:{default:[Jl]},$$scope:{ctx:l}}});function Ue(T){l[53](T)}let Ze={};return l[14].registrar1_port!==void 0&&(Ze.value=l[14].registrar1_port),Be=new ze({props:Ze}),Ke.push(()=>ye(Be,"value",Ue)),{c(){e=S("div"),t=S("div"),C(n.$$.fragment),o=N(),C(s.$$.fragment),i=N(),_=S("div"),C(r.$$.fragment),f=N(),C(u.$$.fragment),k=N(),P=S("div"),C(j.$$.fragment),te=N(),C(W.$$.fragment),U=N(),R=S("div"),C(Q.$$.fragment),re=N(),C(X.$$.fragment),de=N(),A=S("div"),C(D.$$.fragment),L=N(),C(Y.$$.fragment),ge=N(),ne=S("div"),C(ce.$$.fragment),Je=N(),C(se.$$.fragment),y=N(),Z=S("div"),C(oe.$$.fragment),we=N(),C(ue.$$.fragment),Me=N(),be=S("div"),C(pe.$$.fragment),Fe=N(),C(Be.$$.fragment),this.h()},l(T){e=O(T,"DIV",{class:!0});var B=F(e);t=O(B,"DIV",{class:!0});var Xe=F(t);I(n.$$.fragment,Xe),o=V(Xe),I(s.$$.fragment,Xe),Xe.forEach(c),i=V(B),_=O(B,"DIV",{class:!0});var Ve=F(_);I(r.$$.fragment,Ve),f=V(Ve),I(u.$$.fragment,Ve),Ve.forEach(c),k=V(B),P=O(B,"DIV",{class:!0});var Le=F(P);I(j.$$.fragment,Le),te=V(Le),I(W.$$.fragment,Le),Le.forEach(c),U=V(B),R=O(B,"DIV",{class:!0});var Ye=F(R);I(Q.$$.fragment,Ye),re=V(Ye),I(X.$$.fragment,Ye),Ye.forEach(c),de=V(B),A=O(B,"DIV",{class:!0});var Ne=F(A);I(D.$$.fragment,Ne),L=V(Ne),I(Y.$$.fragment,Ne),Ne.forEach(c),ge=V(B),ne=O(B,"DIV",{class:!0});var b=F(ne);I(ce.$$.fragment,b),Je=V(b),I(se.$$.fragment,b),b.forEach(c),y=V(B),Z=O(B,"DIV",{class:!0});var J=F(Z);I(oe.$$.fragment,J),we=V(J),I(ue.$$.fragment,J),J.forEach(c),Me=V(B),be=O(B,"DIV",{class:!0});var Ae=F(be);I(pe.$$.fragment,Ae),Fe=V(Ae),I(Be.$$.fragment,Ae),Ae.forEach(c),B.forEach(c),this.h()},h(){M(t,"class","space-y-2"),M(_,"class","space-y-2"),M(P,"class","space-y-2"),M(R,"class","space-y-2"),M(A,"class","space-y-2"),M(ne,"class","space-y-2"),M(Z,"class","space-y-2"),M(be,"class","space-y-2"),M(e,"class","grid grid-cols-3 gap-4")},m(T,B){v(T,e,B),m(e,t),E(n,t,null),m(t,o),E(s,t,null),m(e,i),m(e,_),E(r,_,null),m(_,f),E(u,_,null),m(e,k),m(e,P),E(j,P,null),m(P,te),E(W,P,null),m(e,U),m(e,R),E(Q,R,null),m(R,re),E(X,R,null),m(e,de),m(e,A),E(D,A,null),m(A,L),E(Y,A,null),m(e,ge),m(e,ne),E(ce,ne,null),m(ne,Je),E(se,ne,null),m(e,y),m(e,Z),E(oe,Z,null),m(Z,we),E(ue,Z,null),m(e,Me),m(e,be),E(pe,be,null),m(be,Fe),E(Be,be,null),le=!0},p(T,B){const Xe={};B[2]&8388608&&(Xe.$$scope={dirty:B,ctx:T}),n.$set(Xe);const Ve={};!a&&B[0]&16384&&(a=!0,Ve.value=T[14].line_number,He(()=>a=!1)),s.$set(Ve);const Le={};B[2]&8388608&&(Le.$$scope={dirty:B,ctx:T}),r.$set(Le);const Ye={};!p&&B[0]&16384&&(p=!0,Ye.value=T[14].display_name,He(()=>p=!1)),u.$set(Ye);const Ne={};B[2]&8388608&&(Ne.$$scope={dirty:B,ctx:T}),j.$set(Ne);const b={};!$e&&B[0]&16384&&($e=!0,b.value=T[14].user_name,He(()=>$e=!1)),W.$set(b);const J={};B[2]&8388608&&(J.$$scope={dirty:B,ctx:T}),Q.$set(J);const Ae={};!G&&B[0]&16384&&(G=!0,Ae.value=T[14].auth_name,He(()=>G=!1)),X.$set(Ae);const st={};B[2]&8388608&&(st.$$scope={dirty:B,ctx:T}),D.$set(st);const $t={};!ee&&B[0]&16384&&(ee=!0,$t.value=T[14].password,He(()=>ee=!1)),Y.$set($t);const pt={};B[2]&8388608&&(pt.$$scope={dirty:B,ctx:T}),ce.$set(pt);const yt={};!ve&&B[0]&16384&&(ve=!0,yt.value=T[14].screen_name,He(()=>ve=!1)),se.$set(yt);const St={};B[2]&8388608&&(St.$$scope={dirty:B,ctx:T}),oe.$set(St);const Ft={};!Ee&&B[0]&16384&&(Ee=!0,Ft.value=T[14].registrar1_ip,He(()=>Ee=!1)),ue.$set(Ft);const Tt={};B[2]&8388608&&(Tt.$$scope={dirty:B,ctx:T}),pe.$set(Tt);const zt={};!De&&B[0]&16384&&(De=!0,zt.value=T[14].registrar1_port,He(()=>De=!1)),Be.$set(zt)},i(T){le||(d(n.$$.fragment,T),d(s.$$.fragment,T),d(r.$$.fragment,T),d(u.$$.fragment,T),d(j.$$.fragment,T),d(W.$$.fragment,T),d(Q.$$.fragment,T),d(X.$$.fragment,T),d(D.$$.fragment,T),d(Y.$$.fragment,T),d(ce.$$.fragment,T),d(se.$$.fragment,T),d(oe.$$.fragment,T),d(ue.$$.fragment,T),d(pe.$$.fragment,T),d(Be.$$.fragment,T),le=!0)},o(T){g(n.$$.fragment,T),g(s.$$.fragment,T),g(r.$$.fragment,T),g(u.$$.fragment,T),g(j.$$.fragment,T),g(W.$$.fragment,T),g(Q.$$.fragment,T),g(X.$$.fragment,T),g(D.$$.fragment,T),g(Y.$$.fragment,T),g(ce.$$.fragment,T),g(se.$$.fragment,T),g(oe.$$.fragment,T),g(ue.$$.fragment,T),g(pe.$$.fragment,T),g(Be.$$.fragment,T),le=!1},d(T){T&&c(e),w(n),w(s),w(r),w(u),w(j),w(W),w(Q),w(X),w(D),w(Y),w(ce),w(se),w(oe),w(ue),w(pe),w(Be)}}}function Vl(l){let e;return{c(){e=H("Функция")},l(t){e=K(t,"Функция")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function hn(l){let e,t=l[79].name+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[79].id,je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&131072&&t!==(t=s[79].name+"")&&ae(n,t),a[0]&131136&&o!==(o=s[79].id)&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function Nl(l){let e,t,n,o,s,a,i,_,r,f,u,p,k,P,j,te,W,$e,U;n=new Oe({props:{$$slots:{default:[Ol]},$$scope:{ctx:l}}});function R(A){l[58](A)}let Q={};l[14].label!==void 0&&(Q.value=l[14].label),s=new ze({props:Q}),Ke.push(()=>ye(s,"value",R)),r=new Oe({props:{$$slots:{default:[Sl]},$$scope:{ctx:l}}});function re(A){l[59](A)}let X={};l[14].value!==void 0&&(X.value=l[14].value),u=new ze({props:X}),Ke.push(()=>ye(u,"value",re)),j=new Oe({props:{$$slots:{default:[Tl]},$$scope:{ctx:l}}});function G(A){l[60](A)}let de={placeholder:"например: blf"};return l[14].custom_type!==void 0&&(de.value=l[14].custom_type),W=new ze({props:de}),Ke.push(()=>ye(W,"value",G)),{c(){e=S("div"),t=S("div"),C(n.$$.fragment),o=N(),C(s.$$.fragment),i=N(),_=S("div"),C(r.$$.fragment),f=N(),C(u.$$.fragment),k=N(),P=S("div"),C(j.$$.fragment),te=N(),C(W.$$.fragment),this.h()},l(A){e=O(A,"DIV",{class:!0});var D=F(e);t=O(D,"DIV",{class:!0});var L=F(t);I(n.$$.fragment,L),o=V(L),I(s.$$.fragment,L),L.forEach(c),i=V(D),_=O(D,"DIV",{class:!0});var Y=F(_);I(r.$$.fragment,Y),f=V(Y),I(u.$$.fragment,Y),Y.forEach(c),k=V(D),P=O(D,"DIV",{class:!0});var ee=F(P);I(j.$$.fragment,ee),te=V(ee),I(W.$$.fragment,ee),ee.forEach(c),D.forEach(c),this.h()},h(){M(t,"class","space-y-2"),M(_,"class","space-y-2"),M(P,"class","space-y-2"),M(e,"class","grid grid-cols-2 gap-4")},m(A,D){v(A,e,D),m(e,t),E(n,t,null),m(t,o),E(s,t,null),m(e,i),m(e,_),E(r,_,null),m(_,f),E(u,_,null),m(e,k),m(e,P),E(j,P,null),m(P,te),E(W,P,null),U=!0},p(A,D){const L={};D[2]&8388608&&(L.$$scope={dirty:D,ctx:A}),n.$set(L);const Y={};!a&&D[0]&16384&&(a=!0,Y.value=A[14].label,He(()=>a=!1)),s.$set(Y);const ee={};D[2]&8388608&&(ee.$$scope={dirty:D,ctx:A}),r.$set(ee);const ge={};!p&&D[0]&16384&&(p=!0,ge.value=A[14].value,He(()=>p=!1)),u.$set(ge);const ne={};D[2]&8388608&&(ne.$$scope={dirty:D,ctx:A}),j.$set(ne);const ce={};!$e&&D[0]&16384&&($e=!0,ce.value=A[14].custom_type,He(()=>$e=!1)),W.$set(ce)},i(A){U||(d(n.$$.fragment,A),d(s.$$.fragment,A),d(r.$$.fragment,A),d(u.$$.fragment,A),d(j.$$.fragment,A),d(W.$$.fragment,A),U=!0)},o(A){g(n.$$.fragment,A),g(s.$$.fragment,A),g(r.$$.fragment,A),g(u.$$.fragment,A),g(j.$$.fragment,A),g(W.$$.fragment,A),U=!1},d(A){A&&c(e),w(n),w(s),w(r),w(u),w(j),w(W)}}}function Pl(l){var a;let e,t,n=Ge(((a=l[17].find(l[55]))==null?void 0:a.params)||[]),o=[];for(let i=0;i<n.length;i+=1)o[i]=kn(on(l,n,i));const s=i=>g(o[i],1,1,()=>{o[i]=null});return{c(){e=S("div");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=O(i,"DIV",{class:!0});var _=F(e);for(let r=0;r<o.length;r+=1)o[r].l(_);_.forEach(c),this.h()},h(){M(e,"class","grid grid-cols-3 gap-4")},m(i,_){v(i,e,_);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(e,null);t=!0},p(i,_){var r;if(_[0]&147520){n=Ge(((r=i[17].find(i[55]))==null?void 0:r.params)||[]);let f;for(f=0;f<n.length;f+=1){const u=on(i,n,f);o[f]?(o[f].p(u,_),d(o[f],1)):(o[f]=kn(u),o[f].c(),d(o[f],1),o[f].m(e,null))}for(et(),f=n.length;f<o.length;f+=1)s(f);tt()}},i(i){if(!t){for(let _=0;_<n.length;_+=1)d(o[_]);t=!0}},o(i){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)g(o[_]);t=!1},d(i){i&&c(e),_t(o,i)}}}function Ol(l){let e;return{c(){e=H("Метка")},l(t){e=K(t,"Метка")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Sl(l){let e;return{c(){e=H("Значение")},l(t){e=K(t,"Значение")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Tl(l){let e;return{c(){e=H("Тип")},l(t){e=K(t,"Тип")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function vn(l){let e,t,n,o,s,a,i;t=new Oe({props:{$$slots:{default:[Ll]},$$scope:{ctx:l}}});const _=[jl,ql],r=[];function f(u,p){return u[74].type==="select"&&u[74].source==="lines"?0:1}return o=f(l),s=r[o]=_[o](l),{c(){e=S("div"),C(t.$$.fragment),n=N(),s.c(),a=N(),this.h()},l(u){e=O(u,"DIV",{class:!0});var p=F(e);I(t.$$.fragment,p),n=V(p),s.l(p),a=V(p),p.forEach(c),this.h()},h(){M(e,"class","space-y-2")},m(u,p){v(u,e,p),E(t,e,null),m(e,n),r[o].m(e,null),m(e,a),i=!0},p(u,p){const k={};p[0]&147456|p[2]&8388608&&(k.$$scope={dirty:p,ctx:u}),t.$set(k);let P=o;o=f(u),o===P?r[o].p(u,p):(et(),g(r[P],1,1,()=>{r[P]=null}),tt(),s=r[o],s?s.p(u,p):(s=r[o]=_[o](u),s.c()),d(s,1),s.m(e,a))},i(u){i||(d(t.$$.fragment,u),d(s),i=!0)},o(u){g(t.$$.fragment,u),g(s),i=!1},d(u){u&&c(e),w(t),r[o].d()}}}function Ll(l){let e=l[74].label+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&147456&&e!==(e=n[74].label+"")&&ae(t,e)},d(n){n&&c(t)}}}function ql(l){let e,t,n;function o(a){l[57](a,l[74])}let s={};return l[14][l[74].id]!==void 0&&(s.value=l[14][l[74].id]),e=new ze({props:s}),Ke.push(()=>ye(e,"value",o)),{c(){C(e.$$.fragment)},l(a){I(e.$$.fragment,a)},m(a,i){E(e,a,i),n=!0},p(a,i){l=a;const _={};!t&&i[0]&147456&&(t=!0,_.value=l[14][l[74].id],He(()=>t=!1)),e.$set(_)},i(a){n||(d(e.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),n=!1},d(a){w(e,a)}}}function jl(l){let e,t,n=`Выберите
                                                                    линию`,o,s,a=Ge(l[6].filter(Dn)),i=[];for(let r=0;r<a.length;r+=1)i[r]=bn(an(l,a,r));function _(){l[56].call(e,l[74])}return{c(){e=S("select"),t=S("option"),t.textContent=n;for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=O(r,"SELECT",{class:!0});var f=F(e);t=O(f,"OPTION",{"data-svelte-h":!0}),lt(t)!=="svelte-ywblog"&&(t.textContent=n);for(let u=0;u<i.length;u+=1)i[u].l(f);f.forEach(c),this.h()},h(){t.__value="",je(t,t.__value),M(e,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"),l[14][l[74].id]===void 0&&It(_)},m(r,f){v(r,e,f),m(e,t);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);xe(e,l[14][l[74].id],!0),o||(s=rt(e,"change",_),o=!0)},p(r,f){if(l=r,f[0]&64){a=Ge(l[6].filter(Dn));let u;for(u=0;u<a.length;u+=1){const p=an(l,a,u);i[u]?i[u].p(p,f):(i[u]=bn(p),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=a.length}f[0]&147520&&xe(e,l[14][l[74].id])},i:Ot,o:Ot,d(r){r&&c(e),_t(i,r),o=!1,s()}}}function bn(l){let e,t,n=l[71].account_number+"",o,s;return{c(){e=S("option"),t=H("Линия "),o=H(n),this.h()},l(a){e=O(a,"OPTION",{});var i=F(e);t=K(i,"Линия "),o=K(i,n),i.forEach(c),this.h()},h(){e.__value=s=l[71].account_number,je(e,e.__value)},m(a,i){v(a,e,i),m(e,t),m(e,o)},p(a,i){i[0]&64&&n!==(n=a[71].account_number+"")&&ae(o,n),i[0]&64&&s!==(s=a[71].account_number)&&(e.__value=s,je(e,e.__value))},d(a){a&&c(e)}}}function kn(l){let e,t,n=l[74].type!=="hidden"&&vn(l);return{c(){n&&n.c(),e=Re()},l(o){n&&n.l(o),e=Re()},m(o,s){n&&n.m(o,s),v(o,e,s),t=!0},p(o,s){o[74].type!=="hidden"?n?(n.p(o,s),s[0]&147456&&d(n,1)):(n=vn(o),n.c(),d(n,1),n.m(e.parentNode,e)):n&&(et(),g(n,1,1,()=>{n=null}),tt())},i(o){t||(d(n),t=!0)},o(o){g(n),t=!1},d(o){o&&c(e),n&&n.d(o)}}}function Ml(l){let e;return{c(){e=H("Номер линии")},l(t){e=K(t,"Номер линии")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Al(l){let e;return{c(){e=H("Отображаемое имя")},l(t){e=K(t,"Отображаемое имя")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Kl(l){let e;return{c(){e=H("Имя пользователя")},l(t){e=K(t,"Имя пользователя")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Hl(l){let e;return{c(){e=H("Имя авторизации")},l(t){e=K(t,"Имя авторизации")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function yl(l){let e;return{c(){e=H("Пароль")},l(t){e=K(t,"Пароль")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Fl(l){let e;return{c(){e=H("Имя на экране")},l(t){e=K(t,"Имя на экране")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function zl(l){let e;return{c(){e=H("IP Регистратора 1")},l(t){e=K(t,"IP Регистратора 1")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Jl(l){let e;return{c(){e=H("Порт Регистратора 1")},l(t){e=K(t,"Порт Регистратора 1")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Bl(l){let e;return{c(){e=H("Описание")},l(t){e=K(t,"Описание")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Ul(l){let e,t,n=(l[21]("common.cancel")||"Cancel")+"",o,s;return e=new Un({props:{class:"mr-2 h-4 w-4"}}),{c(){C(e.$$.fragment),t=N(),o=H(n)},l(a){I(e.$$.fragment,a),t=V(a),o=K(a,n)},m(a,i){E(e,a,i),v(a,t,i),v(a,o,i),s=!0},p(a,i){(!s||i[0]&2097152)&&n!==(n=(a[21]("common.cancel")||"Cancel")+"")&&ae(o,n)},i(a){s||(d(e.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(o)),w(e,a)}}}function Ql(l){let e,t,n;return e=new ll({props:{class:"mr-2 h-4 w-4"}}),{c(){C(e.$$.fragment),t=H(`
                                    OK`)},l(o){I(e.$$.fragment,o),t=K(o,`
                                    OK`)},m(o,s){E(e,o,s),v(o,t,s),n=!0},p:Ot,i(o){n||(d(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){o&&c(t),w(e,o)}}}function Wl(l){let e;return{c(){e=H("Акк #")},l(t){e=K(t,"Акк #")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Gl(l){let e;return{c(){e=H("Панель / Кнопка")},l(t){e=K(t,"Панель / Кнопка")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Rl(l){let e;return{c(){e=H("Тип")},l(t){e=K(t,"Тип")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Xl(l){let e;return{c(){e=H("Описание")},l(t){e=K(t,"Описание")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Yl(l){let e;return{c(){e=H("Действия")},l(t){e=K(t,"Действия")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function Zl(l){let e,t,n,o,s,a,i,_,r,f;return e=new Mt({props:{class:"w-[80px]",$$slots:{default:[Wl]},$$scope:{ctx:l}}}),n=new Mt({props:{class:"w-[120px]",$$slots:{default:[Gl]},$$scope:{ctx:l}}}),s=new Mt({props:{class:"w-[100px]",$$slots:{default:[Rl]},$$scope:{ctx:l}}}),i=new Mt({props:{$$slots:{default:[Xl]},$$scope:{ctx:l}}}),r=new Mt({props:{class:"text-right",$$slots:{default:[Yl]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment),o=N(),C(s.$$.fragment),a=N(),C(i.$$.fragment),_=N(),C(r.$$.fragment)},l(u){I(e.$$.fragment,u),t=V(u),I(n.$$.fragment,u),o=V(u),I(s.$$.fragment,u),a=V(u),I(i.$$.fragment,u),_=V(u),I(r.$$.fragment,u)},m(u,p){E(e,u,p),v(u,t,p),E(n,u,p),v(u,o,p),E(s,u,p),v(u,a,p),E(i,u,p),v(u,_,p),E(r,u,p),f=!0},p(u,p){const k={};p[2]&8388608&&(k.$$scope={dirty:p,ctx:u}),e.$set(k);const P={};p[2]&8388608&&(P.$$scope={dirty:p,ctx:u}),n.$set(P);const j={};p[2]&8388608&&(j.$$scope={dirty:p,ctx:u}),s.$set(j);const te={};p[2]&8388608&&(te.$$scope={dirty:p,ctx:u}),i.$set(te);const W={};p[2]&8388608&&(W.$$scope={dirty:p,ctx:u}),r.$set(W)},i(u){f||(d(e.$$.fragment,u),d(n.$$.fragment,u),d(s.$$.fragment,u),d(i.$$.fragment,u),d(r.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),g(i.$$.fragment,u),g(r.$$.fragment,u),f=!1},d(u){u&&(c(t),c(o),c(a),c(_)),w(e,u),w(n,u),w(s,u),w(i,u),w(r,u)}}}function xl(l){let e,t;return e=new Yt({props:{$$slots:{default:[Zl]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p(n,o){const s={};o[2]&8388608&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function es(l){let e=l[71].account_number+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&524288&&e!==(e=n[71].account_number+"")&&ae(t,e)},d(n){n&&c(t)}}}function ts(l){let e=l[71].panel_number===0?"Осн.":`Расш ${l[71].panel_number}`,t,n,o=l[71].key_number+"",s;return{c(){t=H(e),n=H(` /
                                            `),s=H(o)},l(a){t=K(a,e),n=K(a,` /
                                            `),s=K(a,o)},m(a,i){v(a,t,i),v(a,n,i),v(a,s,i)},p(a,i){i[0]&524288&&e!==(e=a[71].panel_number===0?"Осн.":`Расш ${a[71].panel_number}`)&&ae(t,e),i[0]&524288&&o!==(o=a[71].key_number+"")&&ae(s,o)},d(a){a&&(c(t),c(n),c(s))}}}function ns(l){var s,a,i;let e,t=(((i=(a=(s=l[5])==null?void 0:s.key_types)==null?void 0:a.find(o))==null?void 0:i.verbose)||l[71].type.replace("_"," "))+"",n;function o(..._){return l[62](l[71],..._)}return{c(){e=S("span"),n=H(t),this.h()},l(_){e=O(_,"SPAN",{class:!0});var r=F(e);n=K(r,t),r.forEach(c),this.h()},h(){M(e,"class","capitalize text-xs font-semibold px-2 py-1 rounded bg-muted")},m(_,r){v(_,e,r),m(e,n)},p(_,r){var f,u,p;l=_,r[0]&524320&&t!==(t=(((p=(u=(f=l[5])==null?void 0:f.key_types)==null?void 0:u.find(o))==null?void 0:p.verbose)||l[71].type.replace("_"," "))+"")&&ae(n,t)},d(_){_&&c(e)}}}function ls(l){let e=Cn(l[71])+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&524288&&e!==(e=Cn(n[71])+"")&&ae(t,e)},d(n){n&&c(t)}}}function ss(l){let e,t;return e=new il({props:{class:"h-4 w-4"}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p:Ot,i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function os(l){let e,t;return e=new nl({props:{class:"h-4 w-4"}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p:Ot,i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function as(l){let e,t,n,o,s;function a(..._){return l[63](l[71],..._)}t=new ot({props:{variant:"ghost",size:"icon",disabled:!!l[10],$$slots:{default:[ss]},$$scope:{ctx:l}}}),t.$on("click",a);function i(..._){return l[64](l[71],..._)}return o=new ot({props:{variant:"ghost",size:"icon",class:"text-destructive hover:text-destructive hover:bg-destructive/10",disabled:!!l[10],$$slots:{default:[os]},$$scope:{ctx:l}}}),o.$on("click",i),{c(){e=S("div"),C(t.$$.fragment),n=N(),C(o.$$.fragment),this.h()},l(_){e=O(_,"DIV",{class:!0});var r=F(e);I(t.$$.fragment,r),n=V(r),I(o.$$.fragment,r),r.forEach(c),this.h()},h(){M(e,"class","flex justify-end gap-1")},m(_,r){v(_,e,r),E(t,e,null),m(e,n),E(o,e,null),s=!0},p(_,r){l=_;const f={};r[0]&1024&&(f.disabled=!!l[10]),r[2]&8388608&&(f.$$scope={dirty:r,ctx:l}),t.$set(f);const u={};r[0]&1024&&(u.disabled=!!l[10]),r[2]&8388608&&(u.$$scope={dirty:r,ctx:l}),o.$set(u)},i(_){s||(d(t.$$.fragment,_),d(o.$$.fragment,_),s=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),s=!1},d(_){_&&c(e),w(t),w(o)}}}function rs(l){let e,t,n,o,s,a,i,_,r,f;return e=new Vt({props:{class:"font-medium",$$slots:{default:[es]},$$scope:{ctx:l}}}),n=new Vt({props:{$$slots:{default:[ts]},$$scope:{ctx:l}}}),s=new Vt({props:{$$slots:{default:[ns]},$$scope:{ctx:l}}}),i=new Vt({props:{$$slots:{default:[ls]},$$scope:{ctx:l}}}),r=new Vt({props:{class:"text-right",$$slots:{default:[as]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment),o=N(),C(s.$$.fragment),a=N(),C(i.$$.fragment),_=N(),C(r.$$.fragment)},l(u){I(e.$$.fragment,u),t=V(u),I(n.$$.fragment,u),o=V(u),I(s.$$.fragment,u),a=V(u),I(i.$$.fragment,u),_=V(u),I(r.$$.fragment,u)},m(u,p){E(e,u,p),v(u,t,p),E(n,u,p),v(u,o,p),E(s,u,p),v(u,a,p),E(i,u,p),v(u,_,p),E(r,u,p),f=!0},p(u,p){const k={};p[0]&524288|p[2]&8388608&&(k.$$scope={dirty:p,ctx:u}),e.$set(k);const P={};p[0]&524288|p[2]&8388608&&(P.$$scope={dirty:p,ctx:u}),n.$set(P);const j={};p[0]&524320|p[2]&8388608&&(j.$$scope={dirty:p,ctx:u}),s.$set(j);const te={};p[0]&524288|p[2]&8388608&&(te.$$scope={dirty:p,ctx:u}),i.$set(te);const W={};p[0]&525312|p[2]&8388608&&(W.$$scope={dirty:p,ctx:u}),r.$set(W)},i(u){f||(d(e.$$.fragment,u),d(n.$$.fragment,u),d(s.$$.fragment,u),d(i.$$.fragment,u),d(r.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),g(i.$$.fragment,u),g(r.$$.fragment,u),f=!1},d(u){u&&(c(t),c(o),c(a),c(_)),w(e,u),w(n,u),w(s,u),w(i,u),w(r,u)}}}function wn(l){let e,t;function n(){return l[65](l[71])}return e=new Yt({props:{class:"cursor-pointer transition-colors "+(l[7]===l[71]?"bg-blue-50 dark:bg-blue-900/20":""),$$slots:{default:[rs]},$$scope:{ctx:l}}}),e.$on("click",n),{c(){C(e.$$.fragment)},l(o){I(e.$$.fragment,o)},m(o,s){E(e,o,s),t=!0},p(o,s){l=o;const a={};s[0]&524416&&(a.class="cursor-pointer transition-colors "+(l[7]===l[71]?"bg-blue-50 dark:bg-blue-900/20":"")),s[0]&525344|s[2]&8388608&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function En(l){let e,t;return e=new Yt({props:{$$slots:{default:[us]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p(n,o){const s={};o[0]&2097152|o[2]&8388608&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function is(l){let e=(l[21]("common.no_results")||"No lines configured.")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&2097152&&e!==(e=(n[21]("common.no_results")||"No lines configured.")+"")&&ae(t,e)},d(n){n&&c(t)}}}function us(l){let e,t;return e=new Vt({props:{colspan:5,class:"text-center py-8 text-muted-foreground",$$slots:{default:[is]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p(n,o){const s={};o[0]&2097152|o[2]&8388608&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function fs(l){let e,t,n,o=Ge(l[19]),s=[];for(let _=0;_<o.length;_+=1)s[_]=wn(sn(l,o,_));const a=_=>g(s[_],1,1,()=>{s[_]=null});let i=l[19].length===0&&En(l);return{c(){for(let _=0;_<s.length;_+=1)s[_].c();e=N(),i&&i.c(),t=Re()},l(_){for(let r=0;r<s.length;r+=1)s[r].l(_);e=V(_),i&&i.l(_),t=Re()},m(_,r){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(_,r);v(_,e,r),i&&i.m(_,r),v(_,t,r),n=!0},p(_,r){if(r[0]&80217248){o=Ge(_[19]);let f;for(f=0;f<o.length;f+=1){const u=sn(_,o,f);s[f]?(s[f].p(u,r),d(s[f],1)):(s[f]=wn(u),s[f].c(),d(s[f],1),s[f].m(e.parentNode,e))}for(et(),f=o.length;f<s.length;f+=1)a(f);tt()}_[19].length===0?i?(i.p(_,r),r[0]&524288&&d(i,1)):(i=En(_),i.c(),d(i,1),i.m(t.parentNode,t)):i&&(et(),g(i,1,1,()=>{i=null}),tt())},i(_){if(!n){for(let r=0;r<o.length;r+=1)d(s[r]);d(i),n=!0}},o(_){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)g(s[r]);g(i),n=!1},d(_){_&&(c(e),c(t)),_t(s,_),i&&i.d(_)}}}function _s(l){let e,t,n,o;return e=new xn({props:{$$slots:{default:[xl]},$$scope:{ctx:l}}}),n=new el({props:{$$slots:{default:[fs]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment)},l(s){I(e.$$.fragment,s),t=V(s),I(n.$$.fragment,s)},m(s,a){E(e,s,a),v(s,t,a),E(n,s,a),o=!0},p(s,a){const i={};a[2]&8388608&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&2622624|a[2]&8388608&&(_.$$scope={dirty:a,ctx:s}),n.$set(_)},i(s){o||(d(e.$$.fragment,s),d(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&c(t),w(e,s),w(n,s)}}}function In(l){let e,t,n,o,s,a,i,_,r,f,u;return t=new ot({props:{variant:"outline",size:"sm",disabled:l[9]===1,$$slots:{default:[cs]},$$scope:{ctx:l}}}),t.$on("click",l[66]),f=new ot({props:{variant:"outline",size:"sm",disabled:l[9]===l[20],$$slots:{default:[ps]},$$scope:{ctx:l}}}),f.$on("click",l[67]),{c(){e=S("div"),C(t.$$.fragment),n=N(),o=S("span"),s=H("Страница "),a=H(l[9]),i=H(" из "),_=H(l[20]),r=N(),C(f.$$.fragment),this.h()},l(p){e=O(p,"DIV",{class:!0});var k=F(e);I(t.$$.fragment,k),n=V(k),o=O(k,"SPAN",{class:!0});var P=F(o);s=K(P,"Страница "),a=K(P,l[9]),i=K(P," из "),_=K(P,l[20]),P.forEach(c),r=V(k),I(f.$$.fragment,k),k.forEach(c),this.h()},h(){M(o,"class","py-2 text-sm"),M(e,"class","flex justify-center gap-2")},m(p,k){v(p,e,k),E(t,e,null),m(e,n),m(e,o),m(o,s),m(o,a),m(o,i),m(o,_),m(e,r),E(f,e,null),u=!0},p(p,k){const P={};k[0]&512&&(P.disabled=p[9]===1),k[2]&8388608&&(P.$$scope={dirty:k,ctx:p}),t.$set(P),(!u||k[0]&512)&&ae(a,p[9]),(!u||k[0]&1048576)&&ae(_,p[20]);const j={};k[0]&1049088&&(j.disabled=p[9]===p[20]),k[2]&8388608&&(j.$$scope={dirty:k,ctx:p}),f.$set(j)},i(p){u||(d(t.$$.fragment,p),d(f.$$.fragment,p),u=!0)},o(p){g(t.$$.fragment,p),g(f.$$.fragment,p),u=!1},d(p){p&&c(e),w(t),w(f)}}}function cs(l){let e;return{c(){e=H("Назад")},l(t){e=K(t,"Назад")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function ps(l){let e;return{c(){e=H("Вперед")},l(t){e=K(t,"Вперед")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function ms(l){let e=(l[21]("common.cancel")||"Cancel")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&2097152&&e!==(e=(n[21]("common.cancel")||"Cancel")+"")&&ae(t,e)},d(n){n&&c(t)}}}function $s(l){let e;return{c(){e=H("OK")},l(t){e=K(t,"OK")},m(t,n){v(t,e,n)},d(t){t&&c(e)}}}function ds(l){let e,t,n=l[3]&&fn(l);return{c(){n&&n.c(),e=Re()},l(o){n&&n.l(o),e=Re()},m(o,s){n&&n.m(o,s),v(o,e,s),t=!0},p(o,s){o[3]?n?(n.p(o,s),s[0]&8&&d(n,1)):(n=fn(o),n.c(),d(n,1),n.m(e.parentNode,e)):n&&(et(),g(n,1,1,()=>{n=null}),tt())},i(o){t||(d(n),t=!0)},o(o){g(n),t=!1},d(o){o&&c(e),n&&n.d(o)}}}let Jt=16;function Cn(l){let e={};try{e=JSON.parse(l.additional_info||"{}")}catch{}return l.type==="Line"?e.display_name||e.label||"":e.label||e.value||""}const Dn=l=>l.type==="Line";function gs(l,e,t){let n,o,s,a,i,_,r,f,u,p,k;yn(l,Bn,b=>t(21,k=b));let{lines:P=[]}=e,{maxSoftKeys:j=0}=e,{maxHardKeys:te=0}=e,{image:W=""}=e,{maxLines:$e=0}=e,{open:U=!1}=e,{phone:R={}}=e,{model:Q=null}=e;const re=Fn();let X=[],G=null,de="",A=1,D=null,L={},Y=null,ee=!1,ge=0,ne=0;function ce(b){t(7,G=b)}function Je(b){t(15,Y=b),t(7,G=b),t(10,D={...b});try{t(14,L=JSON.parse(b.additional_info||"{}"))}catch{t(14,L={})}}function se(){t(15,Y=null),t(7,G=null),t(10,D={type:"Line",account_number:1,panel_number:0,key_number:1,additional_info:"{}"}),t(14,L={})}function ve(){var b,J;if(!D||!D.account_number){Et.error("Account Number is required");return}t(10,D.account_number=parseInt(String(D.account_number),10),D),t(10,D.panel_number=parseInt(String(D.panel_number),10),D),t(10,D.key_number=parseInt(String(D.key_number),10),D);for(const Ae of X)if(!(Y&&Ae===Y)&&Ae.type===D.type&&Ae.panel_number===D.panel_number&&Ae.key_number===D.key_number){const st=((J=(b=Q==null?void 0:Q.key_types)==null?void 0:b.find(pt=>pt.id===D.type))==null?void 0:J.verbose)||D.type,$t=D.panel_number===0?"Основная":`Панель ${D.panel_number}`;Et.error(`Дубликат: ${st}, ${$t}, Кнопка ${D.key_number} уже назначена.`);return}if(t(10,D.additional_info=JSON.stringify(L),D),Y){const Ae=X.indexOf(Y);Ae!==-1&&t(6,X[Ae]={...D},X)}else t(6,X=[...X,{...D}]);t(15,Y=null),t(10,D=null),t(14,L={})}function y(b){t(6,X=X.filter(J=>J!==b)),G===b&&t(7,G=null)}function Z(){t(15,Y=null),t(10,D=null),t(14,L={})}function oe(){re("close")}function we(){re("save",X),oe()}let ue=[],Ee=[];zn(async()=>{await Me()});async function Me(){try{const b=await fetch("/api/vendors");if(b.ok){const J=await b.json();t(32,ue=J.vendors||[])}}catch(b){console.error("Failed to load vendors",b)}}function be(){ge=this.naturalWidth,ne=this.naturalHeight,t(11,ge),t(12,ne)}const pe=()=>t(16,ee=!0);function Fe(b){de=b,t(8,de)}function Be(){D.type=Nt(this),t(10,D),t(5,Q)}function De(b){l.$$.not_equal(D.account_number,b)&&(D.account_number=b,t(10,D))}function le(b){l.$$.not_equal(D.key_number,b)&&(D.key_number=b,t(10,D))}function he(b){l.$$.not_equal(D.panel_number,b)&&(D.panel_number=b,t(10,D))}function Te(b){l.$$.not_equal(L.line_number,b)&&(L.line_number=b,t(14,L))}function nt(b){l.$$.not_equal(L.display_name,b)&&(L.display_name=b,t(14,L))}function me(b){l.$$.not_equal(L.user_name,b)&&(L.user_name=b,t(14,L))}function ie(b){l.$$.not_equal(L.auth_name,b)&&(L.auth_name=b,t(14,L))}function h(b){l.$$.not_equal(L.password,b)&&(L.password=b,t(14,L))}function q(b){l.$$.not_equal(L.screen_name,b)&&(L.screen_name=b,t(14,L))}function fe(b){l.$$.not_equal(L.registrar1_ip,b)&&(L.registrar1_ip=b,t(14,L))}function Ce(b){l.$$.not_equal(L.registrar1_port,b)&&(L.registrar1_port=b,t(14,L))}function Se(){L.type=Nt(this),t(14,L),t(17,Ee),t(4,R),t(32,ue)}const ke=b=>b.id===L.type;function _e(b){L[b.id]=Nt(this),t(14,L),t(17,Ee),t(4,R),t(32,ue)}function qe(b,J){l.$$.not_equal(L[J.id],b)&&(L[J.id]=b,t(14,L))}function Ie(b){l.$$.not_equal(L.label,b)&&(L.label=b,t(14,L))}function Ue(b){l.$$.not_equal(L.value,b)&&(L.value=b,t(14,L))}function Ze(b){l.$$.not_equal(L.custom_type,b)&&(L.custom_type=b,t(14,L))}function T(b){l.$$.not_equal(L.description,b)&&(L.description=b,t(14,L))}const B=(b,J)=>J.id===b.type,Xe=(b,J)=>{J.stopPropagation(),Je(b)},Ve=(b,J)=>{J.stopPropagation(),y(b)},Le=b=>ce(b),Ye=()=>t(9,A--,A),Ne=()=>t(9,A++,A);return l.$$set=b=>{"lines"in b&&t(0,P=b.lines),"maxSoftKeys"in b&&t(30,j=b.maxSoftKeys),"maxHardKeys"in b&&t(1,te=b.maxHardKeys),"image"in b&&t(31,W=b.image),"maxLines"in b&&t(2,$e=b.maxLines),"open"in b&&t(3,U=b.open),"phone"in b&&t(4,R=b.phone),"model"in b&&t(5,Q=b.model)},l.$$.update=()=>{var b;if(l.$$.dirty[0]&9&&U&&P&&(t(6,X=JSON.parse(JSON.stringify(P)).map(J=>({...J,account_number:J.account_number||J.number||1,panel_number:J.panel_number||J.expansion_module_number||0,key_number:J.key_number||0,type:J.type||"Line"}))),t(7,G=null)),l.$$.dirty[0]&320&&t(38,n=X.filter(J=>{const Ae=de.toLowerCase();let st={};try{st=JSON.parse(J.additional_info||"{}")}catch{}return[J.account_number,J.panel_number,J.key_number,J.type,st.display_name,st.user_name,st.label].join(" ").toLowerCase().includes(Ae)})),l.$$.dirty[1]&128&&t(20,o=Math.ceil(n.length/Jt)),l.$$.dirty[0]&512|l.$$.dirty[1]&128&&t(19,s=n.slice((A-1)*Jt,A*Jt)),l.$$.dirty[0]&16&&(R.expansion_modules_count||0)>0,l.$$.dirty[0]&1184&&t(37,a=(b=Q==null?void 0:Q.key_types)==null?void 0:b.find(J=>J.id===((D==null?void 0:D.type)||(G==null?void 0:G.type)))),l.$$.dirty[0]&16|l.$$.dirty[1]&1&&t(33,i=W&&R.vendor?`/api/vendors-static/${R.vendor}/static/${W}`:""),l.$$.dirty[0]&16|l.$$.dirty[1]&64&&t(34,_=a!=null&&a.image&&R.vendor?`/api/vendors-static/${R.vendor}/static/${a.image}`:""),l.$$.dirty[0]&160&&t(36,r=Q&&G?Q.keys.find(J=>J.index===(G==null?void 0:G.key_number)&&((G==null?void 0:G.panel_number)||0)===0):null),l.$$.dirty[0]&16|l.$$.dirty[1]&32&&t(35,f=r!=null&&r.my_image&&R.vendor?`/api/vendors-static/${R.vendor}/static/${r.my_image}`:""),l.$$.dirty[1]&28&&t(13,u=f||_||i),l.$$.dirty[0]&8192&&u&&t(16,ee=!1),l.$$.dirty[0]&6304&&t(18,p=(()=>{if(!G||!Q||!ge||!ne)return null;const J=Q.keys.find(Ae=>Ae.index===(G==null?void 0:G.key_number)&&((G==null?void 0:G.panel_number)||0)===0);return J&&J.x>0&&J.y>0?{left:J.x/ge*100,top:J.y/ne*100}:null})()),l.$$.dirty[0]&16|l.$$.dirty[1]&2&&R&&ue.length>0){const J=ue.find(Ae=>Ae.id===R.vendor);t(17,Ee=J?J.features||[]:[])}},[P,te,$e,U,R,Q,X,G,de,A,D,ge,ne,u,L,Y,ee,Ee,p,s,o,k,ce,Je,se,ve,y,Z,oe,we,j,W,ue,i,_,f,r,a,n,be,pe,Fe,Be,De,le,he,Te,nt,me,ie,h,q,fe,Ce,Se,ke,_e,qe,Ie,Ue,Ze,T,B,Xe,Ve,Le,Ye,Ne]}class hs extends Kt{constructor(e){super(),Ht(this,e,gs,ds,At,{lines:0,maxSoftKeys:30,maxHardKeys:1,image:31,maxLines:2,open:3,phone:4,model:5},null,[-1,-1,-1])}}function Vn(l,e,t){const n=l.slice();return n[34]=e[t],n}function Nn(l,e,t){const n=l.slice();return n[34]=e[t],n}function Pn(l,e,t){const n=l.slice();return n[39]=e[t],n}function On(l,e,t){const n=l.slice();return n[42]=e[t],n}function vs(l){let e=(l[1]==="create"?l[12]("phone.add_title")||"Add Phone Configuration":(l[12]("phone.edit_title")||"Edit Phone Configuration")+(l[0].phone_number?` : ${l[0].phone_number}`:""))+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4099&&e!==(e=(n[1]==="create"?n[12]("phone.add_title")||"Add Phone Configuration":(n[12]("phone.edit_title")||"Edit Phone Configuration")+(n[0].phone_number?` : ${n[0].phone_number}`:""))+"")&&ae(t,e)},d(n){n&&c(t)}}}function bs(l){let e=(l[1]==="create"?l[12]("phone.add_desc")||"Manually add a new phone configuration":l[12]("phone.edit_desc")||"Edit existing phone configuration")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4098&&e!==(e=(n[1]==="create"?n[12]("phone.add_desc")||"Manually add a new phone configuration":n[12]("phone.edit_desc")||"Edit existing phone configuration")+"")&&ae(t,e)},d(n){n&&c(t)}}}function ks(l){let e,t,n,o;return e=new Xn({props:{$$slots:{default:[vs]},$$scope:{ctx:l}}}),n=new Yn({props:{$$slots:{default:[bs]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment)},l(s){I(e.$$.fragment,s),t=V(s),I(n.$$.fragment,s)},m(s,a){E(e,s,a),v(s,t,a),E(n,s,a),o=!0},p(s,a){const i={};a[0]&4099|a[1]&16384&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&4098|a[1]&16384&&(_.$$scope={dirty:a,ctx:s}),n.$set(_)},i(s){o||(d(e.$$.fragment,s),d(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&c(t),w(e,s),w(n,s)}}}function ws(l){let e=(l[12]("phone.domain")||"Domain")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.domain")||"Domain")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Sn(l){let e,t=l[42]+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[42],je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&32&&t!==(t=s[42]+"")&&ae(n,t),a[0]&32&&o!==(o=s[42])&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function Es(l){let e=(l[12]("phone.vendor")||"Vendor")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.vendor")||"Vendor")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Tn(l){let e,t=l[39].name+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[39].id,je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&64&&t!==(t=s[39].name+"")&&ae(n,t),a[0]&64&&o!==(o=s[39].id)&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function Is(l){let e=(l[12]("phone.model")||"Model")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.model")||"Model")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Ln(l){let e,t="No models available";return{c(){e=S("option"),e.textContent=t,this.h()},l(n){e=O(n,"OPTION",{"data-svelte-h":!0}),lt(e)!=="svelte-1x77qog"&&(e.textContent=t),this.h()},h(){e.__value="",je(e,e.__value)},m(n,o){v(n,e,o)},d(n){n&&c(e)}}}function qn(l){let e,t=l[34].name+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[34].id,je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&4&&t!==(t=s[34].name+"")&&ae(n,t),a[0]&4&&o!==(o=s[34].id)&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function Cs(l){let e=(l[12]("phone.expansion_module")||"Expansion Module")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.expansion_module")||"Expansion Module")+"")&&ae(t,e)},d(n){n&&c(t)}}}function jn(l){let e,t=l[34]+"",n,o;return{c(){e=S("option"),n=H(t),this.h()},l(s){e=O(s,"OPTION",{});var a=F(e);n=K(a,t),a.forEach(c),this.h()},h(){e.__value=o=l[34],je(e,e.__value)},m(s,a){v(s,e,a),m(e,n)},p(s,a){a[0]&8&&t!==(t=s[34]+"")&&ae(n,t),a[0]&8&&o!==(o=s[34])&&(e.__value=o,je(e,e.__value))},d(s){s&&c(e)}}}function Ds(l){let e=(l[12]("phone.exp_count")||"Count")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.exp_count")||"Count")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Mn(l){let e,t="*";return{c(){e=S("span"),e.textContent=t,this.h()},l(n){e=O(n,"SPAN",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-1n3raya"&&(e.textContent=t),this.h()},h(){M(e,"class","text-red-500")},m(n,o){v(n,e,o)},d(n){n&&c(e)}}}function Vs(l){var a;let e=(l[12]("phone.mac")||"MAC Address")+"",t,n,o,s=((a=l[3])==null?void 0:a.type)!=="gateway"&&Mn();return{c(){t=H(e),n=N(),s&&s.c(),o=Re()},l(i){t=K(i,e),n=V(i),s&&s.l(i),o=Re()},m(i,_){v(i,t,_),v(i,n,_),s&&s.m(i,_),v(i,o,_)},p(i,_){var r;_[0]&4096&&e!==(e=(i[12]("phone.mac")||"MAC Address")+"")&&ae(t,e),((r=i[3])==null?void 0:r.type)!=="gateway"?s||(s=Mn(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(i){i&&(c(t),c(n),c(o)),s&&s.d(i)}}}function An(l){let e,t="*";return{c(){e=S("span"),e.textContent=t,this.h()},l(n){e=O(n,"SPAN",{class:!0,"data-svelte-h":!0}),lt(e)!=="svelte-1n3raya"&&(e.textContent=t),this.h()},h(){M(e,"class","text-red-500")},m(n,o){v(n,e,o)},d(n){n&&c(e)}}}function Ns(l){var a;let e=(l[12]("phone.number")||"Phone Number")+"",t,n,o,s=((a=l[3])==null?void 0:a.type)!=="gateway"&&An();return{c(){t=H(e),n=N(),s&&s.c(),o=Re()},l(i){t=K(i,e),n=V(i),s&&s.l(i),o=Re()},m(i,_){v(i,t,_),v(i,n,_),s&&s.m(i,_),v(i,o,_)},p(i,_){var r;_[0]&4096&&e!==(e=(i[12]("phone.number")||"Phone Number")+"")&&ae(t,e),((r=i[3])==null?void 0:r.type)!=="gateway"?s||(s=An(),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(i){i&&(c(t),c(n),c(o)),s&&s.d(i)}}}function Ps(l){let e=(l[12]("phone.ip_address")||"IP Address")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("phone.ip_address")||"IP Address")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Os(l){let e=(l[12]("common.description")||"Description")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4096&&e!==(e=(n[12]("common.description")||"Description")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Ss(l){let e=(l[7]?l[12]("common.saving")||"Saving...":l[12]("common.save")||"Save")+"",t;return{c(){t=H(e)},l(n){t=K(n,e)},m(n,o){v(n,t,o)},p(n,o){o[0]&4224&&e!==(e=(n[7]?n[12]("common.saving")||"Saving...":n[12]("common.save")||"Save")+"")&&ae(t,e)},d(n){n&&c(t)}}}function Kn(l){let e,t;return e=new ot({props:{variant:"outline",$$slots:{default:[Ts]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){C(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,o){E(e,n,o),t=!0},p(n,o){const s={};o[0]&4097|o[1]&16384&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){w(e,n)}}}function Hn(l){let e,t=l[0].lines.length+"",n,o;return{c(){e=H("("),n=H(t),o=H(")")},l(s){e=K(s,"("),n=K(s,t),o=K(s,")")},m(s,a){v(s,e,a),v(s,n,a),v(s,o,a)},p(s,a){a[0]&1&&t!==(t=s[0].lines.length+"")&&ae(n,t)},d(s){s&&(c(e),c(n),c(o))}}}function Ts(l){var r;let e,t,n=(l[12]("lines.configure")||"Configure Lines")+"",o,s,a,i;e=new sl({props:{class:"mr-2 h-4 w-4"}});let _=((r=l[0].lines)==null?void 0:r.length)>0&&Hn(l);return{c(){C(e.$$.fragment),t=N(),o=H(n),s=N(),_&&_.c(),a=Re()},l(f){I(e.$$.fragment,f),t=V(f),o=K(f,n),s=V(f),_&&_.l(f),a=Re()},m(f,u){E(e,f,u),v(f,t,u),v(f,o,u),v(f,s,u),_&&_.m(f,u),v(f,a,u),i=!0},p(f,u){var p;(!i||u[0]&4096)&&n!==(n=(f[12]("lines.configure")||"Configure Lines")+"")&&ae(o,n),((p=f[0].lines)==null?void 0:p.length)>0?_?_.p(f,u):(_=Hn(f),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(f){i||(d(e.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),i=!1},d(f){f&&(c(t),c(o),c(s),c(a)),w(e,f),_&&_.d(f)}}}function Ls(l){var xt,en;let e,t,n,o,s,a,i,_,r,f,u,p,k,P,j,te,W,$e,U,R,Q,re,X,G,de,A="None",D,L,Y,ee,ge,ne,ce,Je,se,ve,y,Z,oe,we,ue,Ee,Me,be,pe,Fe,Be,De,le,he,Te,nt,me,ie,h,q,fe,Ce,Se,ke,_e,qe,Ie,Ue,Ze;n=new Oe({props:{for:"domain-"+l[13],$$slots:{default:[ws]},$$scope:{ctx:l}}});let T=Ge(l[5]),B=[];for(let $=0;$<T.length;$+=1)B[$]=Sn(On(l,T,$));_=new Oe({props:{for:"vendor-"+l[13],$$slots:{default:[Es]},$$scope:{ctx:l}}});let Xe=Ge(l[6]),Ve=[];for(let $=0;$<Xe.length;$+=1)Ve[$]=Tn(Pn(l,Xe,$));P=new Oe({props:{for:"model-"+l[13],$$slots:{default:[Is]},$$scope:{ctx:l}}});let Le=l[2].length===0&&Ln(),Ye=Ge(l[2]),Ne=[];for(let $=0;$<Ye.length;$+=1)Ne[$]=qn(Nn(l,Ye,$));re=new Oe({props:{for:"exp_module-"+l[13],$$slots:{default:[Cs]},$$scope:{ctx:l}}});let b=Ge(((xt=l[3])==null?void 0:xt.supported_expansion_modules)||[]),J=[];for(let $=0;$<b.length;$+=1)J[$]=jn(Vn(l,b,$));ee=new Oe({props:{for:"exp_count-"+l[13],$$slots:{default:[Ds]},$$scope:{ctx:l}}});function Ae($){l[22]($)}let st={id:"exp_count-"+l[13],type:"number",min:"0",max:((en=l[3])==null?void 0:en.maximum_expansion_modules)||1,disabled:!l[0].expansion_module_model};l[0].expansion_modules_count!==void 0&&(st.value=l[0].expansion_modules_count),ne=new ze({props:st}),Ke.push(()=>ye(ne,"value",Ae)),y=new Oe({props:{for:"mac-"+l[13],$$slots:{default:[Vs]},$$scope:{ctx:l}}});function $t($){l[23]($)}let pt={id:"mac-"+l[13],placeholder:"00:11:22:33:44:55",class:"font-mono uppercase"};l[0].mac_address!==void 0&&(pt.value=l[0].mac_address),oe=new ze({props:pt}),Ke.push(()=>ye(oe,"value",$t)),Me=new Oe({props:{for:"number-"+l[13],$$slots:{default:[Ns]},$$scope:{ctx:l}}});function yt($){l[24]($)}let St={id:"number-"+l[13],placeholder:"101"};l[0].phone_number!==void 0&&(St.value=l[0].phone_number),pe=new ze({props:St}),Ke.push(()=>ye(pe,"value",yt)),pe.$on("blur",l[18]),le=new Oe({props:{for:"ip_address-"+l[13],$$slots:{default:[Ps]},$$scope:{ctx:l}}});function Ft($){l[25]($)}let Tt={id:"ip_address-"+l[13],placeholder:"192.168.1.100"};l[0].ip_address!==void 0&&(Tt.value=l[0].ip_address),Te=new ze({props:Tt}),Ke.push(()=>ye(Te,"value",Ft)),h=new Oe({props:{for:"description-"+l[13],$$slots:{default:[Os]},$$scope:{ctx:l}}});function zt($){l[26]($)}let Zt={id:"description-"+l[13]};l[0].description!==void 0&&(Zt.value=l[0].description),fe=new ze({props:Zt}),Ke.push(()=>ye(fe,"value",zt)),_e=new ot({props:{class:"flex-1",disabled:l[7],$$slots:{default:[Ss]},$$scope:{ctx:l}}}),_e.$on("click",l[16]);let Qe=l[11]&&Kn(l);return{c(){e=S("div"),t=S("div"),C(n.$$.fragment),o=N(),s=S("select");for(let $=0;$<B.length;$+=1)B[$].c();a=N(),i=S("div"),C(_.$$.fragment),r=N(),f=S("select");for(let $=0;$<Ve.length;$+=1)Ve[$].c();u=N(),p=S("div"),k=S("div"),C(P.$$.fragment),j=N(),te=S("select"),Le&&Le.c(),W=Re();for(let $=0;$<Ne.length;$+=1)Ne[$].c();R=N(),Q=S("div"),C(re.$$.fragment),X=N(),G=S("select"),de=S("option"),de.textContent=A;for(let $=0;$<J.length;$+=1)J[$].c();L=N(),Y=S("div"),C(ee.$$.fragment),ge=N(),C(ne.$$.fragment),Je=N(),se=S("div"),ve=S("div"),C(y.$$.fragment),Z=N(),C(oe.$$.fragment),ue=N(),Ee=S("div"),C(Me.$$.fragment),be=N(),C(pe.$$.fragment),Be=N(),De=S("div"),C(le.$$.fragment),he=N(),C(Te.$$.fragment),me=N(),ie=S("div"),C(h.$$.fragment),q=N(),C(fe.$$.fragment),Se=N(),ke=S("div"),C(_e.$$.fragment),qe=N(),Qe&&Qe.c(),this.h()},l($){e=O($,"DIV",{class:!0});var z=F(e);t=O(z,"DIV",{class:!0});var Pe=F(t);I(n.$$.fragment,Pe),o=V(Pe),s=O(Pe,"SELECT",{id:!0,class:!0});var Lt=F(s);for(let We=0;We<B.length;We+=1)B[We].l(Lt);Lt.forEach(c),Pe.forEach(c),a=V(z),i=O(z,"DIV",{class:!0});var dt=F(i);I(_.$$.fragment,dt),r=V(dt),f=O(dt,"SELECT",{id:!0,class:!0});var qt=F(f);for(let We=0;We<Ve.length;We+=1)Ve[We].l(qt);qt.forEach(c),dt.forEach(c),z.forEach(c),u=V($),p=O($,"DIV",{class:!0});var it=F(p);k=O(it,"DIV",{class:!0});var ut=F(k);I(P.$$.fragment,ut),j=V(ut),te=O(ut,"SELECT",{id:!0,class:!0});var Ct=F(te);Le&&Le.l(Ct),W=Re();for(let We=0;We<Ne.length;We+=1)Ne[We].l(Ct);Ct.forEach(c),ut.forEach(c),R=V(it),Q=O(it,"DIV",{class:!0});var gt=F(Q);I(re.$$.fragment,gt),X=V(gt),G=O(gt,"SELECT",{id:!0,class:!0});var Dt=F(G);de=O(Dt,"OPTION",{"data-svelte-h":!0}),lt(de)!=="svelte-1vbnolo"&&(de.textContent=A);for(let We=0;We<J.length;We+=1)J[We].l(Dt);Dt.forEach(c),gt.forEach(c),L=V(it),Y=O(it,"DIV",{class:!0});var ht=F(Y);I(ee.$$.fragment,ht),ge=V(ht),I(ne.$$.fragment,ht),ht.forEach(c),it.forEach(c),Je=V($),se=O($,"DIV",{class:!0});var ft=F(se);ve=O(ft,"DIV",{class:!0});var vt=F(ve);I(y.$$.fragment,vt),Z=V(vt),I(oe.$$.fragment,vt),vt.forEach(c),ue=V(ft),Ee=O(ft,"DIV",{class:!0});var bt=F(Ee);I(Me.$$.fragment,bt),be=V(bt),I(pe.$$.fragment,bt),bt.forEach(c),Be=V(ft),De=O(ft,"DIV",{class:!0});var kt=F(De);I(le.$$.fragment,kt),he=V(kt),I(Te.$$.fragment,kt),kt.forEach(c),ft.forEach(c),me=V($),ie=O($,"DIV",{class:!0});var mt=F(ie);I(h.$$.fragment,mt),q=V(mt),I(fe.$$.fragment,mt),mt.forEach(c),Se=V($),ke=O($,"DIV",{class:!0});var wt=F(ke);I(_e.$$.fragment,wt),qe=V(wt),Qe&&Qe.l(wt),wt.forEach(c),this.h()},h(){var $,z;M(s,"id","domain-"+l[13]),M(s,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),l[0].domain===void 0&&It(()=>l[19].call(s)),M(t,"class","space-y-2"),M(f,"id","vendor-"+l[13]),M(f,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),l[0].vendor===void 0&&It(()=>l[20].call(f)),M(i,"class","space-y-2"),M(e,"class","grid grid-cols-2 gap-4"),M(te,"id","model-"+l[13]),M(te,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),te.disabled=U=l[2].length===0,M(k,"class","space-y-2"),de.__value="",je(de,de.__value),M(G,"id","exp_module-"+l[13]),M(G,"class","flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"),G.disabled=D=(((z=($=l[3])==null?void 0:$.supported_expansion_modules)==null?void 0:z.length)||0)===0,l[0].expansion_module_model===void 0&&It(()=>l[21].call(G)),M(Q,"class","space-y-2"),M(Y,"class","space-y-2"),M(p,"class","grid grid-cols-3 gap-4"),M(ve,"class","space-y-2"),M(Ee,"class","space-y-2"),M(De,"class","space-y-2"),M(se,"class","grid grid-cols-3 gap-4"),M(ie,"class","space-y-2"),M(ke,"class","flex gap-4")},m($,z){v($,e,z),m(e,t),E(n,t,null),m(t,o),m(t,s);for(let Pe=0;Pe<B.length;Pe+=1)B[Pe]&&B[Pe].m(s,null);xe(s,l[0].domain,!0),m(e,a),m(e,i),E(_,i,null),m(i,r),m(i,f);for(let Pe=0;Pe<Ve.length;Pe+=1)Ve[Pe]&&Ve[Pe].m(f,null);xe(f,l[0].vendor,!0),v($,u,z),v($,p,z),m(p,k),E(P,k,null),m(k,j),m(k,te),Le&&Le.m(te,null),m(te,W);for(let Pe=0;Pe<Ne.length;Pe+=1)Ne[Pe]&&Ne[Pe].m(te,null);xe(te,l[0].model_id),m(p,R),m(p,Q),E(re,Q,null),m(Q,X),m(Q,G),m(G,de);for(let Pe=0;Pe<J.length;Pe+=1)J[Pe]&&J[Pe].m(G,null);xe(G,l[0].expansion_module_model,!0),m(p,L),m(p,Y),E(ee,Y,null),m(Y,ge),E(ne,Y,null),v($,Je,z),v($,se,z),m(se,ve),E(y,ve,null),m(ve,Z),E(oe,ve,null),m(se,ue),m(se,Ee),E(Me,Ee,null),m(Ee,be),E(pe,Ee,null),m(se,Be),m(se,De),E(le,De,null),m(De,he),E(Te,De,null),v($,me,z),v($,ie,z),E(h,ie,null),m(ie,q),E(fe,ie,null),v($,Se,z),v($,ke,z),E(_e,ke,null),m(ke,qe),Qe&&Qe.m(ke,null),Ie=!0,Ue||(Ze=[rt(s,"change",l[19]),rt(f,"change",l[20]),rt(f,"change",l[14]),rt(te,"change",l[15]),rt(G,"change",l[21])],Ue=!0)},p($,z){var wt,We,tn,nn;const Pe={};if(z[0]&4096|z[1]&16384&&(Pe.$$scope={dirty:z,ctx:$}),n.$set(Pe),z[0]&32){T=Ge($[5]);let x;for(x=0;x<T.length;x+=1){const at=On($,T,x);B[x]?B[x].p(at,z):(B[x]=Sn(at),B[x].c(),B[x].m(s,null))}for(;x<B.length;x+=1)B[x].d(1);B.length=T.length}z[0]&33&&xe(s,$[0].domain);const Lt={};if(z[0]&4096|z[1]&16384&&(Lt.$$scope={dirty:z,ctx:$}),_.$set(Lt),z[0]&64){Xe=Ge($[6]);let x;for(x=0;x<Xe.length;x+=1){const at=Pn($,Xe,x);Ve[x]?Ve[x].p(at,z):(Ve[x]=Tn(at),Ve[x].c(),Ve[x].m(f,null))}for(;x<Ve.length;x+=1)Ve[x].d(1);Ve.length=Xe.length}z[0]&33&&xe(f,$[0].vendor);const dt={};if(z[0]&4096|z[1]&16384&&(dt.$$scope={dirty:z,ctx:$}),P.$set(dt),$[2].length===0?Le||(Le=Ln(),Le.c(),Le.m(te,W)):Le&&(Le.d(1),Le=null),z[0]&4){Ye=Ge($[2]);let x;for(x=0;x<Ye.length;x+=1){const at=Nn($,Ye,x);Ne[x]?Ne[x].p(at,z):(Ne[x]=qn(at),Ne[x].c(),Ne[x].m(te,null))}for(;x<Ne.length;x+=1)Ne[x].d(1);Ne.length=Ye.length}(!Ie||z[0]&33&&$e!==($e=$[0].model_id))&&xe(te,$[0].model_id),(!Ie||z[0]&4&&U!==(U=$[2].length===0))&&(te.disabled=U);const qt={};if(z[0]&4096|z[1]&16384&&(qt.$$scope={dirty:z,ctx:$}),re.$set(qt),z[0]&8){b=Ge(((wt=$[3])==null?void 0:wt.supported_expansion_modules)||[]);let x;for(x=0;x<b.length;x+=1){const at=Vn($,b,x);J[x]?J[x].p(at,z):(J[x]=jn(at),J[x].c(),J[x].m(G,null))}for(;x<J.length;x+=1)J[x].d(1);J.length=b.length}(!Ie||z[0]&8&&D!==(D=(((tn=(We=$[3])==null?void 0:We.supported_expansion_modules)==null?void 0:tn.length)||0)===0))&&(G.disabled=D),z[0]&33&&xe(G,$[0].expansion_module_model);const it={};z[0]&4096|z[1]&16384&&(it.$$scope={dirty:z,ctx:$}),ee.$set(it);const ut={};z[0]&8&&(ut.max=((nn=$[3])==null?void 0:nn.maximum_expansion_modules)||1),z[0]&1&&(ut.disabled=!$[0].expansion_module_model),!ce&&z[0]&1&&(ce=!0,ut.value=$[0].expansion_modules_count,He(()=>ce=!1)),ne.$set(ut);const Ct={};z[0]&4104|z[1]&16384&&(Ct.$$scope={dirty:z,ctx:$}),y.$set(Ct);const gt={};!we&&z[0]&1&&(we=!0,gt.value=$[0].mac_address,He(()=>we=!1)),oe.$set(gt);const Dt={};z[0]&4104|z[1]&16384&&(Dt.$$scope={dirty:z,ctx:$}),Me.$set(Dt);const ht={};!Fe&&z[0]&1&&(Fe=!0,ht.value=$[0].phone_number,He(()=>Fe=!1)),pe.$set(ht);const ft={};z[0]&4096|z[1]&16384&&(ft.$$scope={dirty:z,ctx:$}),le.$set(ft);const vt={};!nt&&z[0]&1&&(nt=!0,vt.value=$[0].ip_address,He(()=>nt=!1)),Te.$set(vt);const bt={};z[0]&4096|z[1]&16384&&(bt.$$scope={dirty:z,ctx:$}),h.$set(bt);const kt={};!Ce&&z[0]&1&&(Ce=!0,kt.value=$[0].description,He(()=>Ce=!1)),fe.$set(kt);const mt={};z[0]&128&&(mt.disabled=$[7]),z[0]&4224|z[1]&16384&&(mt.$$scope={dirty:z,ctx:$}),_e.$set(mt),$[11]?Qe?(Qe.p($,z),z[0]&2048&&d(Qe,1)):(Qe=Kn($),Qe.c(),d(Qe,1),Qe.m(ke,null)):Qe&&(et(),g(Qe,1,1,()=>{Qe=null}),tt())},i($){Ie||(d(n.$$.fragment,$),d(_.$$.fragment,$),d(P.$$.fragment,$),d(re.$$.fragment,$),d(ee.$$.fragment,$),d(ne.$$.fragment,$),d(y.$$.fragment,$),d(oe.$$.fragment,$),d(Me.$$.fragment,$),d(pe.$$.fragment,$),d(le.$$.fragment,$),d(Te.$$.fragment,$),d(h.$$.fragment,$),d(fe.$$.fragment,$),d(_e.$$.fragment,$),d(Qe),Ie=!0)},o($){g(n.$$.fragment,$),g(_.$$.fragment,$),g(P.$$.fragment,$),g(re.$$.fragment,$),g(ee.$$.fragment,$),g(ne.$$.fragment,$),g(y.$$.fragment,$),g(oe.$$.fragment,$),g(Me.$$.fragment,$),g(pe.$$.fragment,$),g(le.$$.fragment,$),g(Te.$$.fragment,$),g(h.$$.fragment,$),g(fe.$$.fragment,$),g(_e.$$.fragment,$),g(Qe),Ie=!1},d($){$&&(c(e),c(u),c(p),c(Je),c(se),c(me),c(ie),c(Se),c(ke)),w(n),_t(B,$),w(_),_t(Ve,$),w(P),Le&&Le.d(),_t(Ne,$),w(re),_t(J,$),w(ee),w(ne),w(y),w(oe),w(Me),w(pe),w(le),w(Te),w(h),w(fe),w(_e),Qe&&Qe.d(),Ue=!1,Jn(Ze)}}}function qs(l){let e,t,n,o;return e=new Rn({props:{$$slots:{default:[ks]},$$scope:{ctx:l}}}),n=new Gn({props:{class:"space-y-4",$$slots:{default:[Ls]},$$scope:{ctx:l}}}),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment)},l(s){I(e.$$.fragment,s),t=V(s),I(n.$$.fragment,s)},m(s,a){E(e,s,a),v(s,t,a),E(n,s,a),o=!0},p(s,a){const i={};a[0]&4099|a[1]&16384&&(i.$$scope={dirty:a,ctx:s}),e.$set(i);const _={};a[0]&6637|a[1]&16384&&(_.$$scope={dirty:a,ctx:s}),n.$set(_)},i(s){o||(d(e.$$.fragment,s),d(n.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),o=!1},d(s){s&&c(t),w(e,s),w(n,s)}}}function js(l){var _;let e,t,n,o,s;e=new Wn({props:{$$slots:{default:[qs]},$$scope:{ctx:l}}});function a(r){l[28](r)}let i={lines:l[0].lines||[],maxLines:l[4],maxSoftKeys:l[10],maxHardKeys:l[9],image:(_=l[3])==null?void 0:_.image,model:l[3],phone:l[0]};return l[8]!==void 0&&(i.open=l[8]),n=new hs({props:i}),Ke.push(()=>ye(n,"open",a)),n.$on("save",l[17]),n.$on("close",l[29]),{c(){C(e.$$.fragment),t=N(),C(n.$$.fragment)},l(r){I(e.$$.fragment,r),t=V(r),I(n.$$.fragment,r)},m(r,f){E(e,r,f),v(r,t,f),E(n,r,f),s=!0},p(r,f){var k;const u={};f[0]&6639|f[1]&16384&&(u.$$scope={dirty:f,ctx:r}),e.$set(u);const p={};f[0]&1&&(p.lines=r[0].lines||[]),f[0]&16&&(p.maxLines=r[4]),f[0]&1024&&(p.maxSoftKeys=r[10]),f[0]&512&&(p.maxHardKeys=r[9]),f[0]&8&&(p.image=(k=r[3])==null?void 0:k.image),f[0]&8&&(p.model=r[3]),f[0]&1&&(p.phone=r[0]),!o&&f[0]&256&&(o=!0,p.open=r[8],He(()=>o=!1)),n.$set(p)},i(r){s||(d(e.$$.fragment,r),d(n.$$.fragment,r),s=!0)},o(r){g(e.$$.fragment,r),g(n.$$.fragment,r),s=!1},d(r){r&&c(t),w(e,r),w(n,r)}}}function Ms(l,e,t){let n,o,s,a,i,_;yn(l,Bn,y=>t(12,_=y));let{phone:r={domain:"",vendor:"",model_id:"",mac_address:"",phone_number:"",ip_address:"",description:"",lines:[],expansion_module_model:"",type:"phone"}}=e,{mode:f="create"}=e;const u=Fn();let p=[],k=[],P=[],j=!1;const te=Math.random().toString(36).slice(2);let W=!1;zn(async()=>{await Promise.all([$e(),U()]),r.vendor&&await R(r.vendor)});async function $e(){try{const y=await fetch("/api/domains");if(y.ok){const Z=await y.json();t(5,p=Z.domains||[]),f==="create"&&p.length>0&&!r.domain&&t(0,r.domain=p[0],r)}}catch(y){console.error("Failed to load domains",y)}}async function U(){try{const y=await fetch("/api/vendors");if(y.ok){const Z=await y.json();if(t(6,k=Z.vendors||[]),r.vendor){const oe=r.vendor;k.find(we=>we.id===oe)&&t(0,r.vendor=oe,r)}f==="create"&&k.length>0&&!r.vendor&&(t(0,r.vendor=k[0].id,r),await R(r.vendor))}}catch(y){console.error("Failed to load vendors",y)}}async function R(y){try{const Z=await fetch(`/api/models?vendor=${y}`);if(Z.ok){const oe=await Z.json();if(t(2,P=(oe.models||[]).filter(we=>we.type!=="expansion-module").sort((we,ue)=>we.name.localeCompare(ue.name))),console.log("Loaded models:",P),r.model_id)if(!P.find(ue=>ue.id===r.model_id))console.warn(`Model ${r.model_id} not found in list. Resetting.`),t(0,r.model_id="",r);else{const ue=r.model_id;t(0,r.model_id="",r),setTimeout(()=>{t(0,r.model_id=ue,r)},0)}P.length>0&&!r.model_id&&(t(0,r.model_id=P[0].id,r),console.log("loadModels - Defaulting to first model",r.model_id))}}catch(Z){console.error("Failed to load models",Z),t(2,P=[])}}function Q(){t(0,r.model_id="",r),r.vendor?R(r.vendor):t(2,P=[])}function re(y){const Z=y.target;console.log("Model changed to:",Z.value),t(0,r.model_id=Z.value,r)}async function X(){if(r.expansion_module_model&&n){const y=parseInt(String(r.expansion_modules_count),10),Z=n.maximum_expansion_modules||0;if(y>Z){Et.error(_("phone.error_max_exp_modules",{values:{max:Z}})||`Maximum expansion modules allowed: ${Z}`);return}}r.expansion_modules_count&&t(0,r.expansion_modules_count=parseInt(String(r.expansion_modules_count),10),r),console.log("Saving phone:",JSON.parse(JSON.stringify(r))),t(7,j=!0);try{const y=f==="create"?"/api/phones":`/api/phones/${r.id}`,oe=await fetch(y,{method:f==="create"?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(oe.ok){const we=await oe.json();Et.success(f==="create"?_("phone.create_success")||"Phone created successfully":_("phone.update_success")||"Phone updated successfully"),u("save",we),f==="create"&&t(0,r={...r,mac_address:"",phone_number:"",ip_address:"",description:"",lines:[]})}else{const we=await oe.text();Et.error(we||"Failed to save phone")}}catch(y){Et.error("Error: "+y.message)}finally{t(7,j=!1)}}function G(y){t(0,r.lines=y.detail,r),t(8,W=!1)}function de(){f==="create"&&r.phone_number&&(!r.lines||r.lines.length===0)&&(t(0,r.lines=[{type:"Line",account_number:1,panel_number:0,key_number:1,additional_info:JSON.stringify({line_number:"1",display_name:r.phone_number,user_name:r.phone_number,auth_name:r.phone_number,password:"",screen_name:r.phone_number})}],r),Et.info("Line 1 automatically created"))}function A(){r.domain=Nt(this),t(0,r),t(5,p)}function D(){r.vendor=Nt(this),t(0,r),t(5,p)}function L(){r.expansion_module_model=Nt(this),t(0,r),t(5,p)}function Y(y){l.$$.not_equal(r.expansion_modules_count,y)&&(r.expansion_modules_count=y,t(0,r))}function ee(y){l.$$.not_equal(r.mac_address,y)&&(r.mac_address=y,t(0,r))}function ge(y){l.$$.not_equal(r.phone_number,y)&&(r.phone_number=y,t(0,r))}function ne(y){l.$$.not_equal(r.ip_address,y)&&(r.ip_address=y,t(0,r))}function ce(y){l.$$.not_equal(r.description,y)&&(r.description=y,t(0,r))}const Je=()=>t(8,W=!0);function se(y){W=y,t(8,W)}const ve=()=>t(8,W=!1);return l.$$set=y=>{"phone"in y&&t(0,r=y.phone),"mode"in y&&t(1,f=y.mode)},l.$$.update=()=>{if(l.$$.dirty[0]&1&&r.mac_address){const y=Qn(r.mac_address);y!==r.mac_address&&t(0,r.mac_address=y,r)}l.$$.dirty[0]&5&&t(3,n=P.find(y=>y.id===r.model_id)),l.$$.dirty[0]&8&&t(4,o=(n==null?void 0:n.max_account_lines)||0),l.$$.dirty[0]&16&&t(11,s=o>0),l.$$.dirty[0]&8&&t(10,a=(n==null?void 0:n.own_soft_keys)||0),l.$$.dirty[0]&8&&t(9,i=(n==null?void 0:n.own_hard_keys)||0)},[r,f,P,n,o,p,k,j,W,i,a,s,_,te,Q,re,X,G,de,A,D,L,Y,ee,ge,ne,ce,Je,se,ve]}class Xs extends Kt{constructor(e){super(),Ht(this,e,Ms,js,At,{phone:0,mode:1},null,[-1,-1])}}export{Xs as P,cl as a};
