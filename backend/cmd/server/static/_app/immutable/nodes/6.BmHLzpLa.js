import{s as F,o as L,p as O,q as Y,u as Z,r as x,v as ee,d as p,a as M,i as h,b as N,l as S,c as V,e as B,f as j,g as k,h as H,t as E,j as C,k as ae,I as re,G as z,N as oe}from"../chunks/2Jl7x50n.js";import{S as R,i as G,d as y,t as g,a as _,m as b,c as v,b as w,g as q,f as A}from"../chunks/B5CDbBw6.js";import{I as te,t as I,e as K}from"../chunks/C6YbnEvc.js";import{g as se,a as ne,B as J,$ as fe}from"../chunks/C0KXokiL.js";import{C as ie,a as ue}from"../chunks/qiXXM-9Q.js";import{C as ce,a as $e,b as me}from"../chunks/uUGIWKhH.js";import{g as _e}from"../chunks/CNpg8coG.js";function de(r){let e;const a=r[2].default,n=Y(a,r,r[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&Z(n,a,l,l[3],e?ee(a,l[3],s,null):x(l[3]),null)},i(l){e||(_(n,l),e=!0)},o(l){g(n,l),e=!1},d(l){n&&n.d(l)}}}function pe(r){let e,a;const n=[{name:"cloud-upload"},r[1],{iconNode:r[0]}];let l={$$slots:{default:[de]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)l=L(l,n[s]);return e=new te({props:l}),{c(){w(e.$$.fragment)},l(s){v(e.$$.fragment,s)},m(s,t){b(e,s,t),a=!0},p(s,[t]){const o=t&3?se(n,[n[0],t&2&&ne(s[1]),t&1&&{iconNode:s[0]}]):{};t&8&&(o.$$scope={dirty:t,ctx:s}),e.$set(o)},i(s){a||(_(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){y(e,s)}}}function ge(r,e,a){let{$$slots:n={},$$scope:l}=e;const s=[["path",{d:"M12 13v8"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}],["path",{d:"m8 17 4-4 4 4"}]];return r.$$set=t=>{a(1,e=L(L({},e),O(t))),"$$scope"in t&&a(3,l=t.$$scope)},e=O(e),[s,e,n,l]}class le extends R{constructor(e){super(),G(this,e,ge,pe,F,{})}}function he(r){let e;const a=r[2].default,n=Y(a,r,r[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&Z(n,a,l,l[3],e?ee(a,l[3],s,null):x(l[3]),null)},i(l){e||(_(n,l),e=!0)},o(l){g(n,l),e=!1},d(l){n&&n.d(l)}}}function ye(r){let e,a;const n=[{name:"refresh-cw"},r[1],{iconNode:r[0]}];let l={$$slots:{default:[he]},$$scope:{ctx:r}};for(let s=0;s<n.length;s+=1)l=L(l,n[s]);return e=new te({props:l}),{c(){w(e.$$.fragment)},l(s){v(e.$$.fragment,s)},m(s,t){b(e,s,t),a=!0},p(s,[t]){const o=t&3?se(n,[n[0],t&2&&ne(s[1]),t&1&&{iconNode:s[0]}]):{};t&8&&(o.$$scope={dirty:t,ctx:s}),e.$set(o)},i(s){a||(_(e.$$.fragment,s),a=!0)},o(s){g(e.$$.fragment,s),a=!1},d(s){y(e,s)}}}function be(r,e,a){let{$$slots:n={},$$scope:l}=e;const s=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];return r.$$set=t=>{a(1,e=L(L({},e),O(t))),"$$scope"in t&&a(3,l=t.$$scope)},e=O(e),[s,e,n,l]}class ve extends R{constructor(e){super(),G(this,e,be,ye,F,{})}}function Q(r,e,a){const n=r.slice();return n[10]=e[a],n}function we(r){let e=r[3]("system.config_title")+"",a;return{c(){a=E(e)},l(n){a=j(n,e)},m(n,l){h(n,a,l)},p(n,l){l&8&&e!==(e=n[3]("system.config_title")+"")&&M(a,e)},d(n){n&&p(a)}}}function ke(r){let e=r[3]("system.config_desc")+"",a;return{c(){a=E(e)},l(n){a=j(n,e)},m(n,l){h(n,a,l)},p(n,l){l&8&&e!==(e=n[3]("system.config_desc")+"")&&M(a,e)},d(n){n&&p(a)}}}function Ce(r){let e,a,n,l;return e=new $e({props:{$$slots:{default:[we]},$$scope:{ctx:r}}}),n=new me({props:{$$slots:{default:[ke]},$$scope:{ctx:r}}}),{c(){w(e.$$.fragment),a=C(),w(n.$$.fragment)},l(s){v(e.$$.fragment,s),a=k(s),v(n.$$.fragment,s)},m(s,t){b(e,s,t),h(s,a,t),b(n,s,t),l=!0},p(s,t){const o={};t&8200&&(o.$$scope={dirty:t,ctx:s}),e.$set(o);const i={};t&8200&&(i.$$scope={dirty:t,ctx:s}),n.$set(i)},i(s){l||(_(e.$$.fragment,s),_(n.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),l=!1},d(s){s&&p(a),y(e,s),y(n,s)}}}function Ie(r){let e,a,n=(r[0]?r[3]("system.reloading"):r[3]("system.reload_button"))+"",l,s;return e=new ve({props:{class:"mr-2 h-4 w-4 "+(r[0]?"animate-spin":"")}}),{c(){w(e.$$.fragment),a=C(),l=E(n)},l(t){v(e.$$.fragment,t),a=k(t),l=j(t,n)},m(t,o){b(e,t,o),h(t,a,o),h(t,l,o),s=!0},p(t,o){const i={};o&1&&(i.class="mr-2 h-4 w-4 "+(t[0]?"animate-spin":"")),e.$set(i),(!s||o&9)&&n!==(n=(t[0]?t[3]("system.reloading"):t[3]("system.reload_button"))+"")&&M(l,n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){t&&(p(a),p(l)),y(e,t)}}}function U(r){let e,a,n=r[3]("system.deploy_title")+"",l,s,t,o,i,m=K(r[1]),u=[];for(let f=0;f<m.length;f+=1)u[f]=W(Q(r,m,f));const P=f=>g(u[f],1,1,()=>{u[f]=null});let d=r[1].length>1&&X(r);return{c(){e=H("div"),a=H("h3"),l=E(n),s=C(),t=H("div");for(let f=0;f<u.length;f+=1)u[f].c();o=C(),d&&d.c(),this.h()},l(f){e=V(f,"DIV",{class:!0});var c=B(e);a=V(c,"H3",{class:!0});var $=B(a);l=j($,n),$.forEach(p),s=k(c),t=V(c,"DIV",{class:!0});var D=B(t);for(let T=0;T<u.length;T+=1)u[T].l(D);o=k(D),d&&d.l(D),D.forEach(p),c.forEach(p),this.h()},h(){S(a,"class","text-lg font-semibold mb-4"),S(t,"class","flex flex-wrap gap-3"),S(e,"class","border-t pt-4")},m(f,c){h(f,e,c),N(e,a),N(a,l),N(e,s),N(e,t);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(t,null);N(t,o),d&&d.m(t,null),i=!0},p(f,c){if((!i||c&8)&&n!==(n=f[3]("system.deploy_title")+"")&&M(l,n),c&46){m=K(f[1]);let $;for($=0;$<m.length;$+=1){const D=Q(f,m,$);u[$]?(u[$].p(D,c),_(u[$],1)):(u[$]=W(D),u[$].c(),_(u[$],1),u[$].m(t,o))}for(q(),$=m.length;$<u.length;$+=1)P($);A()}f[1].length>1?d?(d.p(f,c),c&2&&_(d,1)):(d=X(f),d.c(),_(d,1),d.m(t,null)):d&&(q(),g(d,1,1,()=>{d=null}),A())},i(f){if(!i){for(let c=0;c<m.length;c+=1)_(u[c]);_(d),i=!0}},o(f){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)g(u[c]);g(d),i=!1},d(f){f&&p(e),oe(u,f),d&&d.d()}}}function Ne(r){let e,a,n=(r[2][r[10]]?r[3]("system.deploying"):r[3]("system.deploy_button",{values:{domain:r[10]}}))+"",l,s;return e=new le({props:{class:"mr-2 h-4 w-4"}}),{c(){w(e.$$.fragment),a=C(),l=E(n)},l(t){v(e.$$.fragment,t),a=k(t),l=j(t,n)},m(t,o){b(e,t,o),h(t,a,o),h(t,l,o),s=!0},p(t,o){(!s||o&14)&&n!==(n=(t[2][t[10]]?t[3]("system.deploying"):t[3]("system.deploy_button",{values:{domain:t[10]}}))+"")&&M(l,n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){t&&(p(a),p(l)),y(e,t)}}}function W(r){let e,a;function n(){return r[7](r[10])}return e=new J({props:{variant:"outline",disabled:r[2][r[10]],$$slots:{default:[Ne]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){w(e.$$.fragment)},l(l){v(e.$$.fragment,l)},m(l,s){b(e,l,s),a=!0},p(l,s){r=l;const t={};s&6&&(t.disabled=r[2][r[10]]),s&8206&&(t.$$scope={dirty:s,ctx:r}),e.$set(t)},i(l){a||(_(e.$$.fragment,l),a=!0)},o(l){g(e.$$.fragment,l),a=!1},d(l){y(e,l)}}}function X(r){let e,a;return e=new J({props:{variant:"default",$$slots:{default:[De]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){w(e.$$.fragment)},l(n){v(e.$$.fragment,n)},m(n,l){b(e,n,l),a=!0},p(n,l){const s={};l&8200&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){a||(_(e.$$.fragment,n),a=!0)},o(n){g(e.$$.fragment,n),a=!1},d(n){y(e,n)}}}function De(r){let e,a,n=r[3]("system.deploy_all")+"",l,s;return e=new le({props:{class:"mr-2 h-4 w-4"}}),{c(){w(e.$$.fragment),a=C(),l=E(n)},l(t){v(e.$$.fragment,t),a=k(t),l=j(t,n)},m(t,o){b(e,t,o),h(t,a,o),h(t,l,o),s=!0},p(t,o){(!s||o&8)&&n!==(n=t[3]("system.deploy_all")+"")&&M(l,n)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){t&&(p(a),p(l)),y(e,t)}}}function Me(r){let e,a,n,l,s;a=new J({props:{disabled:r[0],$$slots:{default:[Ie]},$$scope:{ctx:r}}}),a.$on("click",r[4]);let t=r[1].length>0&&U(r);return{c(){e=H("div"),w(a.$$.fragment),n=C(),t&&t.c(),l=z(),this.h()},l(o){e=V(o,"DIV",{class:!0});var i=B(e);v(a.$$.fragment,i),i.forEach(p),n=k(o),t&&t.l(o),l=z(),this.h()},h(){S(e,"class","flex items-center gap-4")},m(o,i){h(o,e,i),b(a,e,null),h(o,n,i),t&&t.m(o,i),h(o,l,i),s=!0},p(o,i){const m={};i&1&&(m.disabled=o[0]),i&8201&&(m.$$scope={dirty:i,ctx:o}),a.$set(m),o[1].length>0?t?(t.p(o,i),i&2&&_(t,1)):(t=U(o),t.c(),_(t,1),t.m(l.parentNode,l)):t&&(q(),g(t,1,1,()=>{t=null}),A())},i(o){s||(_(a.$$.fragment,o),_(t),s=!0)},o(o){g(a.$$.fragment,o),g(t),s=!1},d(o){o&&(p(e),p(n),p(l)),y(a),t&&t.d(o)}}}function je(r){let e,a,n,l;return e=new ce({props:{$$slots:{default:[Ce]},$$scope:{ctx:r}}}),n=new ue({props:{class:"space-y-6",$$slots:{default:[Me]},$$scope:{ctx:r}}}),{c(){w(e.$$.fragment),a=C(),w(n.$$.fragment)},l(s){v(e.$$.fragment,s),a=k(s),v(n.$$.fragment,s)},m(s,t){b(e,s,t),h(s,a,t),b(n,s,t),l=!0},p(s,t){const o={};t&8200&&(o.$$scope={dirty:t,ctx:s}),e.$set(o);const i={};t&8207&&(i.$$scope={dirty:t,ctx:s}),n.$set(i)},i(s){l||(_(e.$$.fragment,s),_(n.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),l=!1},d(s){s&&p(a),y(e,s),y(n,s)}}}function Ee(r){let e,a,n=r[3]("menu.system")+"",l,s,t,o;return t=new ie({props:{$$slots:{default:[je]},$$scope:{ctx:r}}}),{c(){e=H("div"),a=H("h1"),l=E(n),s=C(),w(t.$$.fragment),this.h()},l(i){e=V(i,"DIV",{class:!0});var m=B(e);a=V(m,"H1",{class:!0});var u=B(a);l=j(u,n),u.forEach(p),s=k(m),v(t.$$.fragment,m),m.forEach(p),this.h()},h(){S(a,"class","text-3xl font-bold text-gray-900 dark:text-gray-100"),S(e,"class","p-6 space-y-6")},m(i,m){h(i,e,m),N(e,a),N(a,l),N(e,s),b(t,e,null),o=!0},p(i,[m]){(!o||m&8)&&n!==(n=i[3]("menu.system")+"")&&M(l,n);const u={};m&8207&&(u.$$scope={dirty:m,ctx:i}),t.$set(u)},i(i){o||(_(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&p(e),y(t)}}}function Se(r,e,a){let n;ae(r,fe,f=>a(3,n=f));let l=!1,s=[],t={};re(async()=>{await i()});async function o(f){return f.status===401?(I.error(n("auth.session_expired")||"Session expired"),_e("/login"),null):f}async function i(){try{let f=await fetch("/api/domains");if(f=await o(f),!f)return;if(f.ok){const c=await f.json();a(1,s=c.domains||[])}}catch(f){console.error("Failed to load domains",f),I.error("Failed to load domains")}}async function m(){a(0,l=!0);try{let f=await fetch("/api/system/reload",{method:"POST"});if(f=await o(f),!f)return;const c=await f.json();f.ok?(I.success(c.message||n("system.reload_success"),{duration:1e4}),await i()):I.error(c.error||n("system.reload_error"),{duration:1/0})}catch{I.error(n("system.reload_error"),{duration:1/0})}finally{a(0,l=!1)}}async function u(f){a(2,t[f]=!0,t);try{let c=await fetch("/api/deploy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:f})});if(c=await o(c),!c)return;const $=await c.json();c.ok?I.success($.message,{duration:1e4}):I.error($.error||"Deploy failed",{duration:1/0})}catch(c){I.error("Deploy failed: "+c.message,{duration:1/0})}finally{a(2,t[f]=!1,t)}}async function P(){for(const f of s)await u(f)}return[l,s,t,n,m,u,P,f=>u(f)]}class qe extends R{constructor(e){super(),G(this,e,Se,Ee,F,{})}}export{qe as component};
